!function() {
    "use strict";
    function i(e, t) {
        return typeof t === e;
    }
    var me = i.bind(null, "string"), Ue = i.bind(null, "undefined"), $e = i.bind(null, "function"), a = i.bind(null, "number");
    function l(e) {
        return !Object.keys(e).length;
    }
    function Ye(e, t) {
        var n = e === !!e, o = n ? 2 : 1, r = n ? t : e, i = n && e;
        function a(e) {
            return null !== e && "object" == typeof e && Object.getPrototypeOf(e) === Object.prototype;
        }
        for (;o < arguments.length; o++) {
            var l, s = arguments[o];
            for (l in s) {
                var c, u, d = r[l], f = s[l];
                Ue(f) || "__proto__" !== l && "constructor" !== l && (u = a(f), 
                c = Array.isArray(f), i && (u || c) ? (u = a(d) === u && Array.isArray(d) === c, 
                r[l] = Ye(!0, u ? d : c ? [] : {}, f)) : r[l] = f);
            }
        }
        return r;
    }
    function Ge(e, t) {
        t = e.indexOf(t);
        -1 < t && e.splice(t, 1);
    }
    function pe(t, n) {
        if (Array.isArray(t) || "length" in t && a(t.length)) for (let e = 0; e < t.length; e++) n(e, t[e]); else Object.keys(t).forEach(function(e) {
            n(e, t[e]);
        });
    }
    var s = {}, he = 1, ge = 3, c = 8;
    function r(e) {
        return e = parseFloat(e), isFinite(e) ? e : 0;
    }
    function ve(e, t, n) {
        var o = (n || document).createElement(e);
        return pe(t || {}, function(e, t) {
            "style" === e ? o.style.cssText = t : e in o ? o[e] = t : o.setAttribute(e, t);
        }), o;
    }
    function u(e, t) {
        for (var n = e || {}; (n = n.parentNode) && !/(9|11)/.test(n.nodeType); ) if (!t || De(n, t)) return n;
    }
    function be(e, t) {
        return De(e, t) ? e : u(e, t);
    }
    function ye(e) {
        e.parentNode && e.parentNode.removeChild(e);
    }
    function we(e, t) {
        e.appendChild(t);
    }
    function xe(e, t) {
        return e.querySelectorAll(t);
    }
    function Te(n, e, o, r, i) {
        e.split(" ").forEach(function(e) {
            var t;
            me(o) ? (t = r["_sce-event-" + e + o] || function(e) {
                for (var t = e.target; t && t !== n; ) {
                    if (De(t, o)) return void r.call(t, e);
                    t = t.parentNode;
                }
            }, r["_sce-event-" + e + o] = t) : (t = o, i = r), n.addEventListener(e, t, i || !1);
        });
    }
    function Ee(n, e, o, r, i) {
        e.split(" ").forEach(function(e) {
            var t;
            me(o) ? t = r["_sce-event-" + e + o] : (t = o, i = r), n.removeEventListener(e, t, i || !1);
        });
    }
    function ke(e, t, n) {
        if (arguments.length < 3) return e.getAttribute(t);
        null == n ? Ce(e, t) : e.setAttribute(t, n);
    }
    function Ce(e, t) {
        e.removeAttribute(t);
    }
    function qe(e) {
        Se(e, "display", "none");
    }
    function Xe(e) {
        Se(e, "display", "");
    }
    function Ke(e) {
        (et(e) ? qe : Xe)(e);
    }
    function Se(n, e, t) {
        if (arguments.length < 3) {
            if (me(e)) return 1 === n.nodeType ? getComputedStyle(n)[e] : null;
            pe(e, function(e, t) {
                Se(n, e, t);
            });
        } else {
            var o = (t || 0 === t) && !isNaN(t);
            n.style[e] = o ? t + "px" : t;
        }
    }
    function d(e, t, n) {
        var o = arguments.length, r = {};
        if (e.nodeType === he) return 1 === o ? (pe(e.attributes, function(e, t) {
            /^data\-/i.test(t.name) && (r[t.name.substr(5)] = t.value);
        }), r) : 2 === o ? ke(e, "data-" + t) : void ke(e, "data-" + t, String(n));
    }
    function De(e, t) {
        var n = !1;
        return n = e && e.nodeType === he ? (e.matches || e.msMatchesSelector || e.webkitMatchesSelector).call(e, t) : n;
    }
    function Ne(e, t) {
        t.parentNode.insertBefore(e, t);
    }
    function f(e) {
        return e.className.trim().split(/\s+/);
    }
    function Ae(e, t) {
        return De(e, "." + t);
    }
    function _e(e, t) {
        var n = f(e);
        n.indexOf(t) < 0 && n.push(t), e.className = n.join(" ");
    }
    function Qe(e, t) {
        var n = f(e);
        Ge(n, t), e.className = n.join(" ");
    }
    function Me(e, t, n) {
        ((n = Ue(n) ? !Ae(e, t) : n) ? _e : Qe)(e, t);
    }
    function Ze(e, t) {
        var n, o;
        if (Ue(t)) return n = r((o = getComputedStyle(e)).paddingLeft) + r(o.paddingRight), 
        o = r(o.borderLeftWidth) + r(o.borderRightWidth), e.offsetWidth - n - o;
        Se(e, "width", t);
    }
    function Re(e, t) {
        var n, o;
        if (Ue(t)) return n = r((o = getComputedStyle(e)).paddingTop) + r(o.paddingBottom), 
        o = r(o.borderTopWidth) + r(o.borderBottomWidth), e.offsetHeight - n - o;
        Se(e, "height", t);
    }
    function Je(e, t, n) {
        var o;
        $e(window.CustomEvent) ? o = new CustomEvent(t, {
            bubbles: !0,
            cancelable: !0,
            detail: n
        }) : (o = e.ownerDocument.createEvent("CustomEvent")).initCustomEvent(t, !0, !0, n), 
        e.dispatchEvent(o);
    }
    function et(e) {
        return e.getClientRects().length;
    }
    function m(e, t, n, o, r) {
        for (e = r ? e.lastChild : e.firstChild; e; ) {
            var i = r ? e.previousSibling : e.nextSibling;
            if (!n && !1 === t(e) || !o && !1 === m(e, t, n, o, r) || n && !1 === t(e)) return !1;
            e = i;
        }
    }
    function tt(e, t, n, o) {
        m(e, t, n, o, !0);
    }
    function nt(e, t) {
        var n = (t = t || document).createDocumentFragment(), o = ve("div", {}, t);
        for (o.innerHTML = e; o.firstChild; ) we(n, o.firstChild);
        return n;
    }
    function ot(e) {
        return e && (!De(e, "p,div") || e.className || ke(e, "style") || !l(d(e)));
    }
    function rt(e, t) {
        var n = ve(t, {}, e.ownerDocument);
        for (pe(e.attributes, function(e, t) {
            try {
                ke(n, t.name, t.value);
            } catch (e) {}
        }); e.firstChild; ) we(n, e.firstChild);
        return e.parentNode.replaceChild(n, e), n;
    }
    var p = "|body|hr|p|div|h1|h2|h3|h4|h5|h6|address|pre|form|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|blockquote|center|details|section|article|aside|nav|main|header|hgroup|footer|fieldset|dl|dt|dd|figure|figcaption|";
    function it(e) {
        return !!/11?|9/.test(e.nodeType) && "|iframe|area|base|basefont|br|col|frame|hr|img|input|wbr|isindex|link|meta|param|command|embed|keygen|source|track|object|".indexOf(`|${e.nodeName.toLowerCase()}|`) < 0;
    }
    function Le(e, t) {
        var n = (e || {}).nodeType || ge;
        return n !== he ? n === ge : "code" === (n = e.tagName.toLowerCase()) ? !t : p.indexOf(`|${n}|`) < 0;
    }
    function h(e) {
        return e.lastChild && h(e.lastChild) && ye(e.lastChild), 3 === e.nodeType ? !e.nodeValue : it(e) && !e.childNodes.length;
    }
    function at(e) {
        m(e, function(t) {
            var n = !Le(t, !0) && t.nodeType !== c, o = t.parentNode;
            if (n && (Le(o, !0) || "P" === o.tagName)) {
                let e = t;
                for (;Le(e.parentNode, !0) || "P" === e.parentNode.tagName; ) e = e.parentNode;
                for (var r = v(e, t), i = t; o && Le(o, !0); ) {
                    if (o.nodeType === he) {
                        for (var a = o.cloneNode(); i.firstChild; ) we(a, i.firstChild);
                        we(i, a);
                    }
                    o = o.parentNode;
                }
                Ne(i, e), h(r) || Ne(r, i), h(e) && ye(e);
            }
            if (n && De(t, "ul,ol") && De(t.parentNode, "ul,ol")) {
                r = "li", n = (n = t).previousElementSibling;
                let e = !r || !n || De(n, r) ? n : null;
                e || Ne(e = ve("li"), t), we(e, t);
            }
        });
    }
    function g(e, t) {
        return e ? (t ? e.previousSibling : e.nextSibling) || g(e.parentNode, t) : null;
    }
    function lt(e) {
        var t, n, o, r, i, a, l = Se(e, "whiteSpace"), s = /line$/i.test(l), c = e.firstChild;
        if (!/pre(\-wrap)?$/i.test(l)) for (;c; ) {
            if (i = c.nextSibling, t = c.nodeValue, (n = c.nodeType) === he && c.firstChild && lt(c), 
            n === ge) {
                for (n = g(c), o = g(c, !0), a = !1; Ae(o, "sceditor-ignore"); ) o = g(o, !0);
                if (Le(c) && o) {
                    for (r = o; r.lastChild; ) for (r = r.lastChild; Ae(r, "sceditor-ignore"); ) r = g(r, !0);
                    a = r.nodeType === ge ? /[\t\n\r ]$/.test(r.nodeValue) : !Le(r);
                }
                t = t.replace(/\u200B/g, ""), o && Le(o) && !a || (t = t.replace(s ? /^[\t ]+/ : /^[\t\n\r ]+/, "")), 
                (t = n && Le(n) ? t : t.replace(s ? /[\t ]+$/ : /[\t\n\r ]+$/, "")).length ? c.nodeValue = t.replace(s ? /[\t ]+/g : /[\t\n\r ]+/g, " ") : ye(c);
            }
            c = i;
        }
    }
    function v(e, t) {
        var n = e.ownerDocument.createRange();
        return n.setStartBefore(e), n.setEndAfter(t), n.extractContents();
    }
    function st(e) {
        for (var t = 0, n = 0; e; ) t += e.offsetLeft, n += e.offsetTop, e = e.offsetParent;
        return {
            left: t,
            top: n
        };
    }
    function b(e, t) {
        var n = e.style;
        return s[t] || (s[t] = t.replace(/^-ms-/, "ms-").replace(/-(\w)/g, function(e, t) {
            return t.toUpperCase();
        })), n = n[t = s[t]], "textAlign" === t && (n = n || Se(e, t), Se(e.parentNode, t) === n || "block" !== Se(e, "display") || De(e, "hr,th")) ? "" : n;
    }
    function ct(e, t) {
        var n = e.attributes.length;
        if (n === t.attributes.length) {
            for (;n--; ) {
                var o = e.attributes[n];
                if ("style" === o.name ? !function(e, t) {
                    var n = e.style.length;
                    if (n === t.style.length) {
                        for (;n--; ) {
                            var o = e.style[n];
                            if (e.style[o] !== t.style[o]) return;
                        }
                        return 1;
                    }
                }(e, t) : o.value !== ke(t, o.name)) return;
            }
            return 1;
        }
    }
    function ut(e) {
        for (;e.firstChild; ) Ne(e.firstChild, e);
        ye(e);
    }
    var dt = {
        toolbar: "bold,italic,underline,strike|font,size,color|mark|email,link,unlink,quote,code|image|bulletlist,orderedlist|left,center,right|indent,outdent|cut,copy,pastetext,removeformat|undo,redo|youtube,vimeo,instagram,facebook,media,extensions|source|reply",
        toolbarExclude: null,
        maxLength: null,
        styles: [],
        themeMode: ke(document.documentElement, "data-bs-theme") || "light",
        fonts: "Arial,Arial Black,Comic Sans MS,Courier New,Georgia,Impact,Sans-serif,Serif,Times New Roman,Trebuchet MS,Verdana",
        format: "bbcode",
        icons: "fontawesome",
        codeLanguages: [ {
            Value: "markup",
            Text: "Plain Text"
        }, {
            Value: "bash",
            Text: "Bash(shell)"
        }, {
            Value: "c",
            Text: "C"
        }, {
            Value: "cpp",
            Text: "C++"
        }, {
            Value: "csharp",
            Text: "C#"
        }, {
            Value: "css",
            Text: "CSS"
        }, {
            Value: "scss",
            Text: "SCSS"
        }, {
            Value: "git",
            Text: "Git"
        }, {
            Value: "markup",
            Text: "HTML"
        }, {
            Value: "java",
            Text: "Java"
        }, {
            Value: "javascript",
            Text: "JavaScript"
        }, {
            Value: "json",
            Text: "JSON"
        }, {
            Value: "python",
            Text: "Python"
        }, {
            Value: "sql",
            Text: "SQL"
        }, {
            Value: "markup",
            Text: "XML"
        }, {
            Value: "vb",
            Text: "Visual Basic"
        } ],
        colors: "#000000,#44B8FF,#1E92F7,#0074D9,#005DC2,#00369B,#b3d5f4|#444444,#C3FFFF,#9DF9FF,#7FDBFF,#68C4E8,#419DC1,#d9f4ff|#666666,#72FF84,#4CEA5E,#2ECC40,#17B529,#008E02,#c0f0c6|#888888,#FFFF44,#FFFA1E,#FFDC00,#E8C500,#C19E00,#fff5b3|#aaaaaa,#FFC95F,#FFA339,#FF851B,#E86E04,#C14700,#ffdbbb|#cccccc,#FF857A,#FF5F54,#FF4136,#E82A1F,#C10300,#ffc6c3|#eeeeee,#FF56FF,#FF30DC,#F012BE,#D900A7,#B20080,#fbb8ec|#ffffff,#F551FF,#CF2BE7,#B10DC9,#9A00B2,#9A00B2,#e8b6ef",
        locale: ke(document.documentElement, "lang") || "en",
        charset: "utf-8",
        width: "100%",
        height: null,
        resizeEnabled: !0,
        resizeMinWidth: null,
        resizeMinHeight: null,
        resizeMaxHeight: null,
        resizeMaxWidth: null,
        resizeHeight: !0,
        resizeWidth: !0,
        dateFormat: "year-month-day",
        toolbarContainer: null,
        enablePasteFiltering: !1,
        disablePasting: !1,
        readOnly: !1,
        rtl: !1,
        autofocus: !1,
        autofocusEnd: !0,
        autoExpand: !1,
        autoUpdate: !1,
        spellcheck: !0,
        runWithoutWysiwygSupport: !1,
        startInSourceMode: !1,
        id: null,
        plugins: "undo,dragdrop",
        zIndex: null,
        bbcodeTrim: !1,
        disableBlockRemove: !1,
        allowedIframeUrls: [],
        parserOptions: {},
        dropDownCss: {},
        allowedTags: [],
        allowedAttributes: [ "contenteditable" ],
        extensionsUrl: "",
        root: "",
        attachmentsPreviewUrl: "",
        albumsPreviewUrl: "",
        onToggleMode: void 0
    }, y = /^(https?|s?ftp|mailto|spotify|skype|ssh|teamspeak|tel):|(\/\/)|data:image\/(png|bmp|gif|p?jpe?g);/i;
    function w(e) {
        return e.replace(/([\-.*+?^=!:${}()|\[\]\/\\])/g, "\\$1");
    }
    function Oe(e, t) {
        var n;
        return e && (!(n = {
            "&": "&amp;",
            "<": "&lt;",
            ">": "&gt;",
            "  ": "&nbsp; ",
            "\r\n": "<br />",
            "\r": "<br />",
            "\n": "<br />"
        }) !== t && (n['"'] = "&#34;", n["'"] = "&#39;", n["`"] = "&#96;"), e = e.replace(/ {2}|\r\n|[&<>\r\n'"`]/g, function(e) {
            return n[e] || e;
        })), e;
    }
    var x = {
        html: '<!DOCTYPE html><html data-bs-theme="{themeMode}"><head><meta http-equiv="Content-Type" content="text/html;charset={charset}" />{styles}</head><body style="min-height:265px" contenteditable="true" {spellcheck}><p></p></body></html>',
        style: '<link rel="stylesheet" type="text/css" href="{style}" />',
        toolbarButton: '<a class="btn sceditor-button sceditor-button-{name}" data-sceditor-command="{name}" unselectable="on"><span unselectable="on">  </span></a>',
        codeOpt: '<a class="sceditor-font-option dropdown-item" href="#" data-language="{language}">{languageName}</a>',
        extensionOpt: '<a class="sceditor-extension-option dropdown-item" href="#" data-language="{extension}">{extension}</a>',
        fontOpt: '<a class="sceditor-font-option dropdown-item" href="#" data-font="{font}"><font face="{font}">{font}</font></a>',
        sizeOpt: '<a class="sceditor-fontsize-option dropdown-item" data-size="{size}" href="#"><font size="{size}">{size}</font></a>',
        albums: '<form class="m-3"><div class="AlbumsListMenu"><div id="AlbumsListBox" class="content"><div id="AlbumsListPager"></div><div id="PostAlbumsLoader" class="text-center"><div class="fa-3x"><i class="fas fa-spinner fa-pulse"></i></div></div><div id="AlbumsListBox" class="content"><div id="PostAlbumsListPlaceholder" data-url="{root}" style="clear: both; "><ul class="AlbumsList list-group"></ul></div></div></form>',
        attachments: '<form class="m-3"><div class="AttachmentListMenu"><div id="AttachmentsListBox" class="content"><div id="AttachmentsListPager"></div><div id="PostAttachmentLoader" class="text-center"><div class="fa-3x"><i class="fas fa-spinner fa-pulse"></i></div></div><div id="AttachmentsListBox" class="content"><div id="PostAttachmentListPlaceholder" data-url="{root}" style="clear: both; "><ul class="AttachmentList list-group"></ul></div><div class="OpenUploadDialog mt-1 d-grid gap-2"><button type="button" class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#UploadDialog">Upload</button></div></div></form>',
        pastetext: '<form class="m-3"><div class="mb-3"><label for="txt" class="form-label">{label}</label> <textarea cols="20" rows="7" id="txt" class="form-control"></textarea></div><input type="button" class="btn btn-sm btn-primary button" value="{insert}" /></div></form>',
        image: '<form class="m-3"><div class="mb-3"><label for="link" class="form-label">{url}</label> <input type="text" id="link" dir="ltr" placeholder="https://" class="form-control" /></div><div class="mb-3"><label for="des" class="form-label">{desc}</label> <input type="text" id="des" class="form-control" /></div><input type="button" class="btn btn-sm btn-primary button" value="{insert}" /></form>',
        email: '<form class="m-3"><div class="mb-3"><label for="email" class="form-label">{label}</label> <input type="text" id="email" dir="ltr" class="form-control" /></div><div class="mb-3"><label for="des" class="form-label">{desc}</label> <input type="text" id="des" class="form-control" /></div><input type="button" class="btn btn-sm btn-primary button" value="{insert}" /></form>',
        link: '<form class="m-3"><div class="mb-3"><label for="link" class="form-label">{url}</label> <input type="text" id="link" dir="ltr" placeholder="https://" class="form-control" /></div><div class="mb-3"><label for="des" class="form-label">{desc}</label> <input type="text" id="des" class="form-control" /></div><input type="button" class="btn btn-sm btn-primary button" value="{ins}" /></form>',
        mediaMenu: '<form class="m-3"><div class="mb-3"><label for="link" class="form-label">{label}</label> <input type="text" id="link" dir="ltr" placeholder="https://" class="form-control" /></div><input type="button" class="btn btn-sm btn-primary button" value="{insert}" /></form>',
        youtubeMenu: '<form class="m-3"><div class="mb-3"><label for="link" class="form-label">{label}</label> <input type="text" id="link" dir="ltr" placeholder="https://" class="form-control" /></div><input type="button" class="btn btn-sm btn-primary button" value="{insert}" /></form>',
        instagramMenu: '<form class="m-3"><div class="mb-3"><label for="link" class="form-label">{label}</label> <input type="text" id="link" dir="ltr" placeholder="https://" class="form-control" /></div><input type="button" class="btn btn-sm btn-primary button" value="{insert}" /></form>',
        facebookMenu: '<form class="m-3"><div class="mb-3"><label for="link" class="form-label">{label}</label> <input type="text" id="link" dir="ltr" placeholder="https://" class="form-control" /></div><input type="button" class="btn btn-sm btn-primary button" value="{insert}" /></form>',
        facebook: '<div class="ratio ratio-1x1 border" data-oembed-url="{url}" data-facebook-url="{url}"><iframe src="https://www.facebook.com/plugins/post.php?href={url}"></iframe></div>',
        instagram: '<div class="ratio ratio-1x1 border" data-oembed-url="https://www.instagram.com/p/{id}" data-instagram-url="{url}"><iframe src="https://www.instagram.com/p/{id}/embed/captioned/"></iframe></div>',
        youtube: '<div data-oembed-url="https://youtube.com/embed/{id}" data-youtube-url="{url}" class="ratio ratio-16x9 border"><iframe src="https://youtube.com/embed/{id}?hd=1"></iframe></div>',
        vimeo: '<div data-oembed-url="https://vimeo.com/{vimeoId}" data-vimeo-url="{url}" class="ratio ratio-16x9 border"><iframe src="https://player.vimeo.com/video/{vimeoId}?show_title=1&show_byline=1&show_portrait=1&fullscreen=1"></iframe></div>'
    };
    function Ie(e, t, n) {
        var o = x[e];
        return Object.keys(t).forEach(function(e) {
            o = o.replace(new RegExp(w(`{${e}}`), "g"), t[e]);
        }), o = n ? nt(o) : o;
    }
    function T(n) {
        if ("mozHidden" in document) {
            let e = n.getBody(), t;
            for (;e; ) {
                if ((t = e).firstChild) t = t.firstChild; else {
                    for (;t && !t.nextSibling; ) t = t.parentNode;
                    t = t && t.nextSibling;
                }
                3 !== e.nodeType || !/[\n\r\t]+/.test(e.nodeValue) || /^pre/.test(Se(e.parentNode, "whiteSpace")) || ye(e), 
                e = t;
            }
        }
    }
    var Fe = {
        albums: {
            exec: function(e) {
                var t = ve("div");
                we(t, Ie("albums", {
                    root: this.opts.root
                }, !0)), this.createDropDown(e, "albums", t);
                getAlbumImagesData(5, 0, !1);
            },
            tooltip: "User Albums"
        },
        attachments: {
            exec: function(e) {
                var t = ve("div");
                we(t, Ie("attachments", {
                    root: this.opts.root
                }, !0)), this.createDropDown(e, "attachments", t);
                getPaginationData(5, 0, !1);
            },
            tooltip: "User Attachments"
        },
        bold: {
            exec: "bold",
            tooltip: "Bold",
            shortcut: "Ctrl+B"
        },
        italic: {
            exec: "italic",
            tooltip: "Italic",
            shortcut: "Ctrl+I"
        },
        underline: {
            exec: "underline",
            tooltip: "Underline",
            shortcut: "Ctrl+U"
        },
        strike: {
            exec: "strikethrough",
            tooltip: "Strikethrough"
        },
        mark: {
            exec: function() {
                this.wysiwygEditorInsertHtml("<mark>", "</mark>");
            },
            tooltip: "Highlight",
            shortcut: "Ctrl+H"
        },
        left: {
            state: function(e) {
                var t;
                if (e = e && 3 === e.nodeType ? e.parentNode : e) return t = "ltr" === Se(e, "direction"), 
                e = Se(e, "textAlign"), /left/.test(e) || e === (t ? "start" : "end");
            },
            exec: "justifyleft",
            tooltip: "Align left"
        },
        center: {
            exec: "justifycenter",
            tooltip: "Center"
        },
        right: {
            state: function(e) {
                var t;
                if (e = e && 3 === e.nodeType ? e.parentNode : e) return t = "ltr" === Se(e, "direction"), 
                e = Se(e, "textAlign"), /right/.test(e) || e === (t ? "end" : "start");
            },
            exec: "justifyright",
            tooltip: "Align right"
        },
        justify: {
            exec: "justifyfull",
            tooltip: "Justify"
        },
        font: {
            _dropDown: function(t, e, n) {
                var o = ve("div");
                Te(o, "click", "a", function(e) {
                    n(d(this, "font")), t.closeDropDown(!0), e.preventDefault();
                }), t.opts.fonts.split(",").forEach(function(e) {
                    we(o, Ie("fontOpt", {
                        font: e
                    }, !0));
                }), t.createDropDown(e, "font-picker", o);
            },
            exec: function(e) {
                var t = this;
                Fe.font._dropDown(t, e, function(e) {
                    t.execCommand("fontname", e);
                });
            },
            tooltip: "Font Name"
        },
        size: {
            _dropDown: function(t, e, n) {
                var o = ve("div");
                Te(o, "click", "a", function(e) {
                    n(d(this, "size")), t.closeDropDown(!0), e.preventDefault();
                });
                for (let e = 1; e <= 7; e++) we(o, Ie("sizeOpt", {
                    size: e
                }, !0));
                t.createDropDown(e, "fontsize-picker", o);
            },
            exec: function(e) {
                var t = this;
                Fe.size._dropDown(t, e, function(e) {
                    t.execCommand("fontsize", e);
                });
            },
            tooltip: "Font Size"
        },
        color: {
            _dropDown: function(t, e, n) {
                var o = ve("div"), r = "", i = Fe.color;
                i._htmlCache || (t.opts.colors.split("|").forEach(function(e) {
                    r += '<div class="sceditor-color-column">', e.split(",").forEach(function(e) {
                        r += `<a href="#" class="sceditor-color-option" style="background-color: ${e}" data-color="${e}"></a>`;
                    }), r += "</div>";
                }), i._htmlCache = r), we(o, nt(i._htmlCache)), Te(o, "click", "a", function(e) {
                    n(d(this, "color")), t.closeDropDown(!0), e.preventDefault();
                }), t.createDropDown(e, "color-picker", o);
            },
            exec: function(e) {
                var t = this;
                Fe.color._dropDown(t, e, function(e) {
                    t.execCommand("forecolor", e);
                });
            },
            tooltip: "Font Color"
        },
        removeformat: {
            exec: "removeformat",
            tooltip: "Remove Formatting"
        },
        cut: {
            exec: "cut",
            tooltip: "Cut",
            errorMessage: "Your browser does not allow the cut command. Please use the keyboard shortcut Ctrl/Cmd-X"
        },
        copy: {
            exec: "copy",
            tooltip: "Copy",
            errorMessage: "Your browser does not allow the copy command. Please use the keyboard shortcut Ctrl/Cmd-C"
        },
        paste: {
            exec: "paste",
            tooltip: "Paste",
            errorMessage: "Your browser does not allow the paste command. Please use the keyboard shortcut Ctrl/Cmd-V"
        },
        pastetext: {
            exec: function(e) {
                var t, n = ve("div"), o = this;
                we(n, Ie("pastetext", {
                    label: o._("Paste your text inside the following box:"),
                    insert: o._("Insert")
                }, !0)), Te(n, "click", ".button", function(e) {
                    (t = xe(n, "#txt")[0].value) && o.wysiwygEditorInsertText(t), 
                    o.closeDropDown(!0), e.preventDefault();
                }), o.createDropDown(e, "pastetext", n);
            },
            tooltip: "Paste Text"
        },
        bulletlist: {
            exec: function() {
                T(this), this.execCommand("insertunorderedlist");
            },
            tooltip: "Bullet list"
        },
        orderedlist: {
            exec: function() {
                T(this), this.execCommand("insertorderedlist");
            },
            tooltip: "Numbered list"
        },
        indent: {
            state: function(e, t) {
                var n;
                return De(t, "li") || De(t, "ul,ol,menu") && (n = (t = this.getRangeHelper().selectedRange()).startContainer.parentNode, 
                t = t.endContainer.parentNode, n !== n.parentNode.firstElementChild || De(t, "li") && t !== t.parentNode.lastElementChild) ? 0 : -1;
            },
            exec: function() {
                var e = this.getRangeHelper().getFirstBlockParent();
                this.focus(), be(e, "ul,ol,menu") && this.execCommand("indent");
            },
            tooltip: "Add indent"
        },
        outdent: {
            state: function(e, t) {
                return be(t, "ul,ol,menu") ? 0 : -1;
            },
            exec: function() {
                be(this.getRangeHelper().getFirstBlockParent(), "ul,ol,menu") && this.execCommand("outdent");
            },
            tooltip: "Remove one indent"
        },
        code: {
            _dropDown: function(t, e, n) {
                var o = ve("div");
                Te(o, "click", "a", function(e) {
                    n(d(this, "language")), t.closeDropDown(!0), e.preventDefault();
                }), t.opts.codeLanguages.forEach(function(e) {
                    we(o, Ie("codeOpt", {
                        language: e.Value,
                        languageName: e.Text
                    }, !0));
                }), t.createDropDown(e, "codeLanguage-picker", o);
            },
            exec: function(e) {
                var t = this;
                Fe.code._dropDown(t, e, function(e) {
                    t.wysiwygEditorInsertHtml(`<pre class="border border-danger rounded m-2 p-2"><code class="language-${e}">`, "</code></pre>");
                });
            },
            tooltip: "Code"
        },
        extensions: {
            _dropDown: function(t, e, n) {
                var o = ve("div");
                Te(o, "click", "a", function(e) {
                    n(d(this, "language")), t.closeDropDown(!0), e.preventDefault();
                }), fetch(t.opts.extensionsUrl, {
                    method: "GET"
                }).then(e => e.json()).then(e => {
                    e.forEach(function(e) {
                        e.useToolbar || we(o, Ie("extensionOpt", {
                            extension: e.name
                        }, !0));
                    });
                }), t.createDropDown(e, "extensions-picker", o);
            },
            exec: function(e) {
                var t = this;
                Fe.extensions._dropDown(t, e, function(e) {
                    t.wysiwygEditorInsertText(`[${e}]`, `[/${e}]`);
                });
            },
            tooltip: "More BBCode"
        },
        image: {
            _dropDown: function(n, e, o) {
                var r = ve("div"), i = (we(r, Ie("image", {
                    url: n._("URL:"),
                    desc: n._("Description (optional):"),
                    insert: n._("Insert")
                }, !0)), xe(r, "#link")[0]);
                function t(e) {
                    var t = xe(r, "#des")[0].value;
                    i.value && o(i.value, t), n.closeDropDown(!0), e.preventDefault();
                }
                Te(r, "click", ".button", t), Te(r, "keypress", function(e) {
                    13 === e.which && i.value && t(e);
                }, !0), n.createDropDown(e, "insertimage", r);
            },
            exec: function(e) {
                var o = this;
                Fe.image._dropDown(o, e, function(e, t) {
                    var n = "";
                    t && (n += ` alt="${Oe(t)}"`), n += ` src="${Oe(e)}"`, o.wysiwygEditorInsertHtml(`<img${n} class="img-user-posted img-thumbnail" />`);
                });
            },
            tooltip: "Insert an image"
        },
        email: {
            _dropDown: function(n, e, o) {
                var r = ve("div");
                we(r, Ie("email", {
                    label: n._("E-mail:"),
                    desc: n._("Description (optional):"),
                    insert: n._("Insert")
                }, !0)), Te(r, "click", ".button", function(e) {
                    var t = xe(r, "#email")[0].value;
                    t && o(t, xe(r, "#des")[0].value), n.closeDropDown(!0), e.preventDefault();
                }), n.createDropDown(e, "insertemail", r);
            },
            exec: function(e) {
                var n = this;
                Fe.email._dropDown(n, e, function(e, t) {
                    !n.getRangeHelper().selectedHtml() || t ? n.wysiwygEditorInsertHtml(`<a href="mailto:${Oe(e)}">${Oe(t || e)}</a>`) : n.execCommand("createlink", "mailto:" + e);
                });
            },
            tooltip: "Insert an email"
        },
        link: {
            _dropDown: function(t, e, n) {
                var o = ve("div"), r = (we(o, Ie("link", {
                    url: t._("URL:"),
                    desc: t._("Description (optional):"),
                    ins: t._("Insert")
                }, !0)), xe(o, "#link")[0]);
                function i(e) {
                    r.value && n(r.value, xe(o, "#des")[0].value), t.closeDropDown(!0), 
                    e.preventDefault();
                }
                Te(o, "click", ".button", i), Te(o, "keypress", function(e) {
                    13 === e.which && r.value && i(e);
                }, !0), t.createDropDown(e, "insertlink", o);
            },
            exec: function(e) {
                var n = this;
                Fe.link._dropDown(n, e, function(e, t) {
                    t || !n.getRangeHelper().selectedHtml() ? n.wysiwygEditorInsertHtml(`<a href="${Oe(e)}">${Oe(t || e)}</a>`) : n.execCommand("createlink", e);
                });
            },
            tooltip: "Insert a link"
        },
        unlink: {
            state: function() {
                return be(this.currentNode(), "a") ? 0 : -1;
            },
            exec: function() {
                var e = be(this.currentNode(), "a");
                if (e) {
                    for (;e.firstChild; ) Ne(e.firstChild, e);
                    ye(e);
                }
            },
            tooltip: "Unlink"
        },
        quote: {
            exec: function(e, t, n) {
                var o = '<div class="border rounded mx-3 mb-3 p-3 border-secondary shadow-sm"><span contenteditable="false"><i class="fa fa-quote-left text-primary fs-4 me-2"></i></span>', r = "</div>";
                t ? (o = o + t + (n = n ? `<cite class="card-text text-end d-block text-body-secondary small">${Oe(n)}</cite>` : "") + r, 
                r = null) : this.getRangeHelper().selectedHtml(), this.wysiwygEditorInsertHtml(o, r);
            },
            tooltip: "Insert a Quote"
        },
        media: {
            _dropDown: function(n, e, o) {
                var r = ve("div");
                we(r, Ie("mediaMenu", {
                    label: n._("Media URL:"),
                    insert: n._("Insert")
                }, !0)), Te(r, "click", ".button", function(e) {
                    var t = xe(r, "#link")[0].value;
                    o(t), n.closeDropDown(!0), e.preventDefault();
                }), n.createDropDown(e, "insertmedia", r);
            },
            exec: function(e) {
                var t = this;
                Fe.media._dropDown(t, e, function(e) {
                    t.wysiwygEditorInsertHtml(`[media]${e}[/media]`);
                });
            },
            tooltip: "Insert an embed media like a YouTube video, facebook post or twitter status."
        },
        vimeo: {
            _dropDown: function(o, e, r) {
                var i = ve("div");
                we(i, Ie("youtubeMenu", {
                    label: o._("Video URL:"),
                    insert: o._("Insert")
                }, !0)), Te(i, "click", ".button", function(e) {
                    var t, n = xe(i, "#link")[0].value;
                    "" !== n && (t = n.match(/vimeo\..*\/(\d+)(?:$|\/)/), r(n, t[1])), 
                    o.closeDropDown(!0), e.preventDefault();
                }), o.createDropDown(e, "insertlink", i);
            },
            exec: function(e) {
                var n = this;
                Fe.vimeo._dropDown(n, e, function(e, t) {
                    n.wysiwygEditorInsertHtml(Ie("vimeo", {
                        url: e,
                        vimeoId: t
                    }));
                });
            },
            tooltip: "Insert a Vimeo video"
        },
        instagram: {
            _dropDown: function(o, e, r) {
                var i = ve("div");
                we(i, Ie("instagramMenu", {
                    label: o._("Instagram Post URL:"),
                    insert: o._("Insert")
                }, !0)), Te(i, "click", ".button", function(e) {
                    var t, n = xe(i, "#link")[0].value;
                    "" !== n && (t = n.match(/\/(p|tv|reel)\/(.*?)\//)) && (t = t[2], 
                    r(n, t)), o.closeDropDown(!0), e.preventDefault();
                }), o.createDropDown(e, "insertlink", i);
            },
            exec: function(e) {
                var n = this;
                Fe.instagram._dropDown(n, e, function(e, t) {
                    n.wysiwygEditorInsertHtml(Ie("instagram", {
                        url: e,
                        id: t
                    }));
                });
            },
            tooltip: "Insert an Instagram Post"
        },
        facebook: {
            _dropDown: function(n, e, o) {
                var r = ve("div");
                we(r, Ie("facebookMenu", {
                    label: n._("Facebook post URL:"),
                    insert: n._("Insert")
                }, !0)), Te(r, "click", ".button", function(e) {
                    var t = xe(r, "#link")[0].value;
                    o(t), n.closeDropDown(!0), e.preventDefault();
                }), n.createDropDown(e, "insertlink", r);
            },
            exec: function(e) {
                var t = this;
                Fe.facebook._dropDown(t, e, function(e) {
                    t.wysiwygEditorInsertHtml(Ie("facebook", {
                        url: e
                    }));
                });
            },
            tooltip: "Insert an Facebook Post"
        },
        youtube: {
            _dropDown: function(o, e, r) {
                var i = ve("div");
                we(i, Ie("youtubeMenu", {
                    label: o._("Video URL:"),
                    insert: o._("Insert")
                }, !0)), Te(i, "click", ".button", function(e) {
                    var t = xe(i, "#link")[0].value, n = t.match(/(?:v=|v\/|embed\/|youtu.be\/)?([a-zA-Z0-9_-]{11})/);
                    n && /^[a-zA-Z0-9_\-]{11}$/.test(n[1]) && r(t, n[1]), o.closeDropDown(!0), 
                    e.preventDefault();
                }), o.createDropDown(e, "insertlink", i);
            },
            exec: function(e) {
                var n = this;
                Fe.youtube._dropDown(n, e, function(e, t) {
                    n.wysiwygEditorInsertHtml(Ie("youtube", {
                        url: e,
                        id: t
                    }));
                });
            },
            tooltip: "Insert a YouTube video"
        },
        date: {
            _date: function(e) {
                var t = new Date(), n = t.getYear(), o = t.getMonth() + 1, t = t.getDate();
                return o < 10 && (o = "0" + o), t < 10 && (t = "0" + t), e.opts.dateFormat.replace(/year/i, n = n < 2e3 ? 1900 + n : n).replace(/month/i, o).replace(/day/i, t);
            },
            exec: function() {
                this.insertText(Fe.date._date(this));
            },
            txtExec: function() {
                this.insertText(Fe.date._date(this));
            },
            tooltip: "Insert current date"
        },
        time: {
            _time: function() {
                var e = new Date(), t = e.getHours(), n = e.getMinutes(), e = e.getSeconds();
                return (t = t < 10 ? "0" + t : t) + ":" + (n = n < 10 ? "0" + n : n) + ":" + (e = e < 10 ? "0" + e : e);
            },
            exec: function() {
                this.insertText(Fe.time._time());
            },
            txtExec: function() {
                this.insertText(Fe.time._time());
            },
            tooltip: "Insert current time"
        },
        undo: {
            exec: "undo",
            tooltip: "Undo",
            shortcut: "Ctrl+Z"
        },
        redo: {
            exec: "redo",
            tooltip: "Redo",
            shortcut: "Ctrl+Y"
        },
        maximize: {
            state: function() {
                return this.maximize();
            },
            exec: function() {
                this.maximize(!this.maximize()), this.focus();
            },
            txtExec: function() {
                this.maximize(!this.maximize()), this.focus();
            },
            tooltip: "Maximize",
            shortcut: "Ctrl+Shift+M"
        },
        source: {
            state: function() {
                return this.sourceMode();
            },
            exec: function() {
                this.toggleSourceMode(), this.focus();
            },
            txtExec: function() {
                this.toggleSourceMode(), this.focus();
            },
            tooltip: "View source",
            shortcut: "Ctrl+Shift+S"
        },
        reply: {
            exec: function() {
                null != document.getElementById("QuickReplyDialog") ? document.querySelector('[data-bs-save*="modal"]').click() : null != document.querySelector('[formaction*="PostReply"]') ? document.querySelector('[formaction*="PostReply"]').click() : null != document.querySelector('[id*="QuickReply"]') ? document.querySelector('[id*="QuickReply"]').click() : null != document.querySelector('[id*="PostReply"]') && (window.location.href = document.querySelector('[id*="PostReply"]').href);
            },
            tooltip: "Post Reply",
            shortcut: "Ctrl+Enter"
        },
        ignore: {}
    }, E = {};
    function ft(i) {
        function a(e) {
            return "signal" + e.charAt(0).toUpperCase() + e.slice(1);
        }
        function e(e, t) {
            e = [].slice.call(e);
            for (var n, o = a(e.shift()), r = 0; r < l.length; r++) if (o in l[r] && (n = l[r][o].apply(i, e), 
            t)) return n;
        }
        var r = this, l = [];
        r.call = function() {
            e(arguments, !1);
        }, r.callOnlyFirst = function() {
            return e(arguments, !0);
        }, r.hasHandler = function(e) {
            var t = l.length;
            for (e = a(e); t--; ) if (e in l[t]) return !0;
            return !1;
        }, r.exists = function(e) {
            return e in E && "function" == typeof (e = E[e]) && "object" == typeof e.prototype;
        }, r.isRegistered = function(t) {
            if (r.exists(t)) {
                let e = l.length;
                for (;e--; ) if (l[e] instanceof E[t]) return !0;
            }
            return !1;
        }, r.register = function(e) {
            return !(!r.exists(e) || r.isRegistered(e) || (e = new E[e](), l.push(e), 
            "init" in e && e.init.call(i), 0));
        }, r.deregister = function(e) {
            var t, n = l.length, o = !1;
            if (r.isRegistered(e)) for (;n--; ) l[n] instanceof E[e] && (o = !0, 
            "destroy" in (t = l.splice(n, 1)[0])) && t.destroy.call(i);
            return o;
        }, r.destroy = function() {
            for (var e = l.length; e--; ) "destroy" in l[e] && l[e].destroy.call(i);
            l = [], i = null;
        };
    }
    ft.plugins = E;
    var k = function(e, t, n) {
        var o, r, i, a, l, s = "", c = e.startContainer, u = e.startOffset;
        for (c && 3 !== c.nodeType && (c = c.childNodes[u], u = 0), i = a = u; n > s.length && c && 3 === c.nodeType; ) o = c.nodeValue, 
        r = n - s.length, l && (a = o.length, i = 0), l = c, c = t ? (u = i = Math.max(a - r, 0), 
        s = o.substr(i, a - i) + s, l.previousSibling) : (u = i + (a = Math.min(r, o.length)), 
        s += o.substr(i, a), l.nextSibling);
        return {
            node: l || c,
            offset: u,
            text: s
        };
    };
    function mt(r, e, i) {
        var a, l, s = e || r.contentDocument || r.document, c = "sceditor-start-marker", u = "sceditor-end-marker", g = this;
        g.insertHTML = function(e, t) {
            if (!g.selectedRange()) return !1;
            t && (e += g.selectedHtml() + t);
            var n = ve("p", {}, s), o = s.createDocumentFragment();
            for (n.innerHTML = i(e); n.firstChild; ) we(o, n.firstChild);
            g.insertNode(o);
        }, l = function(e, t, n) {
            var o, r = s.createDocumentFragment();
            if ("string" == typeof e ? (t && (e += g.selectedHtml() + t), r = nt(e)) : (we(r, e), 
            t && (we(r, g.selectedRange().extractContents()), we(r, t))), o = r.lastChild) {
                for (;!Le(o.lastChild, !0); ) o = o.lastChild;
                return it(o) ? o.lastChild || we(o, document.createTextNode("​")) : o = r, 
                g.removeMarkers(), we(o, a(c)), we(o, a(u)), n ? (we(e = ve("div"), r), 
                e.innerHTML) : r;
            }
        }, g.insertNode = function(e, t) {
            var n, o, e = l(e, t), t = g.selectedRange(), r = t.commonAncestorContainer, i = [];
            if (!e) return !1;
            function a(e) {
                e && h(e) && i.indexOf(e) < 0 && ye(e);
            }
            t.startContainer !== t.endContainer && (pe(r.childNodes, function(e, t) {
                h(t) && i.push(t);
            }), n = e.firstChild, o = e.lastChild), t.deleteContents(), r && 3 !== r.nodeType && !it(r) ? Ne(e, r) : (t.insertNode(e), 
            a(n && n.previousSibling), a(o && o.nextSibling)), g.restoreRange();
        }, g.cloneSelected = function() {
            var e = g.selectedRange();
            if (e) return e.cloneRange();
        }, g.selectedRange = function() {
            var e, t, n = r.getSelection();
            if (n) {
                if (n.rangeCount <= 0) {
                    for (t = s.body; t.firstChild; ) t = t.firstChild;
                    (e = s.createRange()).setStartBefore(t), n.addRange(e);
                }
                return e = 0 < n.rangeCount ? n.getRangeAt(0) : e;
            }
        }, g.hasSelection = function() {
            var e = r.getSelection();
            return e && 0 < e.rangeCount;
        }, g.selectedHtml = function() {
            var e, t = g.selectedRange();
            return t ? (we(e = ve("p", {}, s), t.cloneContents()), e.innerHTML) : "";
        }, g.parentNode = function() {
            var e = g.selectedRange();
            if (e) return e.commonAncestorContainer;
        }, g.getFirstBlockParent = function(e) {
            var t = function(e) {
                return Le(e, !0) ? (e = e ? e.parentNode : null) && t(e) : e;
            };
            return t(e || g.parentNode());
        }, g.insertNodeAt = function(e, t) {
            var n = g.selectedRange(), o = g.cloneSelected();
            if (!o) return !1;
            o.collapse(e), o.insertNode(t), g.selectRange(n);
        }, a = function(e) {
            g.removeMarker(e);
            e = ve("span", {
                id: e,
                className: "sceditor-selection sceditor-ignore",
                style: "display:none;line-height:0"
            }, s);
            return e.innerHTML = " ", e;
        }, g.insertMarkers = function() {
            var e = g.selectedRange(), t = a(c);
            g.removeMarkers(), g.insertNodeAt(!0, t), e && e.collapsed ? t.parentNode.insertBefore(a(u), t.nextSibling) : g.insertNodeAt(!1, a(u));
        }, g.getMarker = function(e) {
            return s.getElementById(e);
        }, g.removeMarker = function(e) {
            e = g.getMarker(e);
            e && ye(e);
        }, g.removeMarkers = function() {
            g.removeMarker(c), g.removeMarker(u);
        }, g.saveRange = function() {
            g.insertMarkers();
        }, g.selectRange = function(e) {
            var t, n = r.getSelection(), o = e.endContainer;
            if (e.collapsed && o && !Le(o, !0)) {
                for (t = o.lastChild; t && De(t, ".sceditor-ignore"); ) t = t.previousSibling;
                De(t, "br") && ((o = s.createRange()).setEndAfter(t), o.collapse(!1), 
                g.compare(e, o)) && (e.setStartBefore(t), e.collapse(!0));
            }
            n && (g.clear(), n.addRange(e));
        }, g.restoreRange = function() {
            var e, t = g.selectedRange(), n = g.getMarker(c), o = g.getMarker(u);
            if (!n || !o || !t) return !1;
            e = n.nextSibling === o, (t = s.createRange()).setStartBefore(n), t.setEndAfter(o), 
            e && t.collapse(!0), g.selectRange(t), g.removeMarkers();
        }, g.selectOuterText = function(e, t) {
            var n = g.cloneSelected();
            if (!n) return !1;
            n.collapse(!1), e = k(n, !0, e), t = k(n, !1, t), n.setStart(e.node, e.offset), 
            n.setEnd(t.node, t.offset), g.selectRange(n);
        }, g.getOuterText = function(e, t) {
            var n = g.cloneSelected();
            return n ? (n.collapse(!e), k(n, e, t).text) : "";
        }, g.replaceKeyword = function(e, t, n, o, r, i) {
            n || e.sort(function(e, t) {
                return e[0].length - t[0].length;
            });
            var a, l, s, c, u, d, f, m = "(^|[\\s    ])", p = e.length, h = r ? 1 : 0, n = o || e[p - 1][0].length;
            for (r && n++, i = i || "", c = (a = g.getOuterText(!0, n)).length, 
            a += i, t && (a += g.getOuterText(!1, n)); p--; ) if (f = (d = e[p][0]).length, 
            s = Math.max(0, c - f - h), l = -1, r ? (u = a.substr(s).match(new RegExp(m + w(d) + m))) && (l = u.index + s + u[1].length) : l = a.indexOf(d, s), 
            -1 < l && l <= c && c <= l + f + h) return g.selectOuterText(u = c - l, f - u - (/^\S/.test(i) ? 1 : 0)), 
            g.insertHTML(e[p][1]), !0;
            return !1;
        }, g.compare = function(e, t) {
            return t = t || g.selectedRange(), e && t ? 0 === e.compareBoundaryPoints(Range.END_TO_END, t) && 0 === e.compareBoundaryPoints(Range.START_TO_START, t) : !e && !t;
        }, g.clear = function() {
            var e = r.getSelection();
            e && (e.removeAllRanges ? e.removeAllRanges() : e.empty && e.empty());
        };
    }
    var C, e = navigator.userAgent, pt = /iPhone|iPod|iPad| wosbrowser\//i.test(e), ht = (L = !!window.document.documentMode, 
    O = "-ms-ime-align" in document.documentElement.style, (n = document.createElement("div")).contentEditable = !0, 
    "contentEditable" in document.documentElement && "true" === n.contentEditable && (n = /Opera Mobi|Opera Mini/i.test(e), 
    /Android/i.test(e) && (n = !0, /Safari/.test(e)) && (n = !(R = /Safari\/(\d+)/.exec(e)) || !R[1] || R[1] < 534), 
    / Silk\//i.test(e) && (n = !(R = /AppleWebKit\/(\d+)/.exec(e)) || !R[1] || R[1] < 534), 
    pt && (n = /OS [0-4](_\d)+ like Mac/i.test(e)), /Firefox/i.test(e) && (n = !1), 
    /OneBrowser/i.test(e) && (n = !1), "UCWEB" === navigator.vendor && (n = !1), 
    !(n = L || O ? !0 : n)));
    const {
        entries: gt,
        setPrototypeOf: S,
        isFrozen: D,
        getPrototypeOf: N,
        getOwnPropertyDescriptor: A
    } = Object;
    let {
        freeze: Be,
        seal: t,
        create: vt
    } = Object, {
        apply: _,
        construct: M
    } = "undefined" != typeof Reflect && Reflect;
    Be = Be || function(e) {
        return e;
    }, t = t || function(e) {
        return e;
    }, _ = _ || function(e, t, n) {
        return e.apply(t, n);
    }, M = M || function(e, t) {
        return new e(...t);
    };
    const bt = o(Array.prototype.forEach), yt = o(Array.prototype.pop), wt = o(Array.prototype.push), xt = o(String.prototype.toLowerCase), Tt = o(String.prototype.toString), Et = o(String.prototype.match), kt = o(String.prototype.replace), Ct = o(String.prototype.indexOf), St = o(String.prototype.trim), We = o(RegExp.prototype.test), Dt = (C = TypeError, 
    function() {
        for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++) t[n] = arguments[n];
        return M(C, t);
    });
    function o(r) {
        return function(e) {
            for (var t = arguments.length, n = new Array(1 < t ? t - 1 : 0), o = 1; o < t; o++) n[o - 1] = arguments[o];
            return _(r, e, n);
        };
    }
    function Ve(t, n, e) {
        var o, r = 2 < arguments.length && void 0 !== e ? e : xt;
        S && S(t, null);
        let i = n.length;
        for (;i--; ) {
            let e = n[i];
            "string" == typeof e && (o = r(e)) !== e && (D(n) || (n[i] = o), e = o), 
            t[e] = !0;
        }
        return t;
    }
    function je(e) {
        var t, n, o = vt(null);
        for ([ t, n ] of gt(e)) void 0 !== A(e, t) && (Array.isArray(n) ? o[t] = function(t) {
            for (let e = 0; e < t.length; e++) void 0 === A(t, e) && (t[e] = null);
            return t;
        }(n) : n && "object" == typeof n && n.constructor === Object ? o[t] = je(n) : o[t] = n);
        return o;
    }
    function Nt(e, t) {
        for (;null !== e; ) {
            var n = A(e, t);
            if (n) {
                if (n.get) return o(n.get);
                if ("function" == typeof n.value) return o(n.value);
            }
            e = N(e);
        }
        return function(e) {
            return console.warn("fallback value for", e), null;
        };
    }
    const At = Be([ "a", "abbr", "acronym", "address", "area", "article", "aside", "audio", "b", "bdi", "bdo", "big", "blink", "blockquote", "body", "br", "button", "canvas", "caption", "center", "cite", "code", "col", "colgroup", "content", "data", "datalist", "dd", "decorator", "del", "details", "dfn", "dialog", "dir", "div", "dl", "dt", "element", "em", "fieldset", "figcaption", "figure", "font", "footer", "form", "h1", "h2", "h3", "h4", "h5", "h6", "head", "header", "hgroup", "hr", "html", "i", "img", "input", "ins", "kbd", "label", "legend", "li", "main", "map", "mark", "marquee", "menu", "menuitem", "meter", "nav", "nobr", "ol", "optgroup", "option", "output", "p", "picture", "pre", "progress", "q", "rp", "rt", "ruby", "s", "samp", "section", "select", "shadow", "small", "source", "spacer", "span", "strike", "strong", "style", "sub", "summary", "sup", "table", "tbody", "td", "template", "textarea", "tfoot", "th", "thead", "time", "tr", "track", "tt", "u", "ul", "var", "video", "wbr" ]), _t = Be([ "svg", "a", "altglyph", "altglyphdef", "altglyphitem", "animatecolor", "animatemotion", "animatetransform", "circle", "clippath", "defs", "desc", "ellipse", "filter", "font", "g", "glyph", "glyphref", "hkern", "image", "line", "lineargradient", "marker", "mask", "metadata", "mpath", "path", "pattern", "polygon", "polyline", "radialgradient", "rect", "stop", "style", "switch", "symbol", "text", "textpath", "title", "tref", "tspan", "view", "vkern" ]), Mt = Be([ "feBlend", "feColorMatrix", "feComponentTransfer", "feComposite", "feConvolveMatrix", "feDiffuseLighting", "feDisplacementMap", "feDistantLight", "feDropShadow", "feFlood", "feFuncA", "feFuncB", "feFuncG", "feFuncR", "feGaussianBlur", "feImage", "feMerge", "feMergeNode", "feMorphology", "feOffset", "fePointLight", "feSpecularLighting", "feSpotLight", "feTile", "feTurbulence" ]), Rt = Be([ "animate", "color-profile", "cursor", "discard", "font-face", "font-face-format", "font-face-name", "font-face-src", "font-face-uri", "foreignobject", "hatch", "hatchpath", "mesh", "meshgradient", "meshpatch", "meshrow", "missing-glyph", "script", "set", "solidcolor", "unknown", "use" ]), Lt = Be([ "math", "menclose", "merror", "mfenced", "mfrac", "mglyph", "mi", "mlabeledtr", "mmultiscripts", "mn", "mo", "mover", "mpadded", "mphantom", "mroot", "mrow", "ms", "mspace", "msqrt", "mstyle", "msub", "msup", "msubsup", "mtable", "mtd", "mtext", "mtr", "munder", "munderover", "mprescripts" ]), Ot = Be([ "maction", "maligngroup", "malignmark", "mlongdiv", "mscarries", "mscarry", "msgroup", "mstack", "msline", "msrow", "semantics", "annotation", "annotation-xml", "mprescripts", "none" ]), It = Be([ "#text" ]), Ft = Be([ "accept", "action", "align", "alt", "autocapitalize", "autocomplete", "autopictureinpicture", "autoplay", "background", "bgcolor", "border", "capture", "cellpadding", "cellspacing", "checked", "cite", "class", "clear", "color", "cols", "colspan", "controls", "controlslist", "coords", "crossorigin", "datetime", "decoding", "default", "dir", "disabled", "disablepictureinpicture", "disableremoteplayback", "download", "draggable", "enctype", "enterkeyhint", "face", "for", "headers", "height", "hidden", "high", "href", "hreflang", "id", "inputmode", "integrity", "ismap", "kind", "label", "lang", "list", "loading", "loop", "low", "max", "maxlength", "media", "method", "min", "minlength", "multiple", "muted", "name", "nonce", "noshade", "novalidate", "nowrap", "open", "optimum", "pattern", "placeholder", "playsinline", "poster", "preload", "pubdate", "radiogroup", "readonly", "rel", "required", "rev", "reversed", "role", "rows", "rowspan", "spellcheck", "scope", "selected", "shape", "size", "sizes", "span", "srclang", "start", "src", "srcset", "step", "style", "summary", "tabindex", "title", "translate", "type", "usemap", "valign", "value", "width", "xmlns", "slot" ]), Ht = Be([ "accent-height", "accumulate", "additive", "alignment-baseline", "ascent", "attributename", "attributetype", "azimuth", "basefrequency", "baseline-shift", "begin", "bias", "by", "class", "clip", "clippathunits", "clip-path", "clip-rule", "color", "color-interpolation", "color-interpolation-filters", "color-profile", "color-rendering", "cx", "cy", "d", "dx", "dy", "diffuseconstant", "direction", "display", "divisor", "dur", "edgemode", "elevation", "end", "fill", "fill-opacity", "fill-rule", "filter", "filterunits", "flood-color", "flood-opacity", "font-family", "font-size", "font-size-adjust", "font-stretch", "font-style", "font-variant", "font-weight", "fx", "fy", "g1", "g2", "glyph-name", "glyphref", "gradientunits", "gradienttransform", "height", "href", "id", "image-rendering", "in", "in2", "k", "k1", "k2", "k3", "k4", "kerning", "keypoints", "keysplines", "keytimes", "lang", "lengthadjust", "letter-spacing", "kernelmatrix", "kernelunitlength", "lighting-color", "local", "marker-end", "marker-mid", "marker-start", "markerheight", "markerunits", "markerwidth", "maskcontentunits", "maskunits", "max", "mask", "media", "method", "mode", "min", "name", "numoctaves", "offset", "operator", "opacity", "order", "orient", "orientation", "origin", "overflow", "paint-order", "path", "pathlength", "patterncontentunits", "patterntransform", "patternunits", "points", "preservealpha", "preserveaspectratio", "primitiveunits", "r", "rx", "ry", "radius", "refx", "refy", "repeatcount", "repeatdur", "restart", "result", "rotate", "scale", "seed", "shape-rendering", "specularconstant", "specularexponent", "spreadmethod", "startoffset", "stddeviation", "stitchtiles", "stop-color", "stop-opacity", "stroke-dasharray", "stroke-dashoffset", "stroke-linecap", "stroke-linejoin", "stroke-miterlimit", "stroke-opacity", "stroke", "stroke-width", "style", "surfacescale", "systemlanguage", "tabindex", "targetx", "targety", "transform", "transform-origin", "text-anchor", "text-decoration", "text-rendering", "textlength", "type", "u1", "u2", "unicode", "values", "viewbox", "visibility", "version", "vert-adv-y", "vert-origin-x", "vert-origin-y", "width", "word-spacing", "wrap", "writing-mode", "xchannelselector", "ychannelselector", "x", "x1", "x2", "xmlns", "y", "y1", "y2", "z", "zoomandpan" ]), Pt = Be([ "accent", "accentunder", "align", "bevelled", "close", "columnsalign", "columnlines", "columnspan", "denomalign", "depth", "dir", "display", "displaystyle", "encoding", "fence", "frame", "height", "href", "id", "largeop", "length", "linethickness", "lspace", "lquote", "mathbackground", "mathcolor", "mathsize", "mathvariant", "maxsize", "minsize", "movablelimits", "notation", "numalign", "open", "rowalign", "rowlines", "rowspacing", "rowspan", "rspace", "rquote", "scriptlevel", "scriptminsize", "scriptsizemultiplier", "selection", "separator", "separators", "stretchy", "subscriptshift", "supscriptshift", "symmetric", "voffset", "width", "xmlns" ]), zt = Be([ "xlink:href", "xml:id", "xlink:title", "xml:space", "xmlns:xlink" ]);
    var R = t(/\{\{[\w\W]*|[\w\W]*\}\}/gm), e = t(/<%[\w\W]*|[\w\W]*%>/gm), L = t(/\${[\w\W]*}/gm), O = t(/^data-[\-\w.\u00B7-\uFFFF]/), n = t(/^aria-[\-\w]+$/);
    const Ut = t(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i);
    var I = t(/^(?:\w+script|data):/i), F = t(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g);
    const Bt = t(/^html$/i);
    var Wt = Object.freeze({
        __proto__: null,
        MUSTACHE_EXPR: R,
        ERB_EXPR: e,
        TMPLIT_EXPR: L,
        DATA_ATTR: O,
        ARIA_ATTR: n,
        IS_ALLOWED_URI: Ut,
        IS_SCRIPT_OR_DATA: I,
        ATTR_WHITESPACE: F,
        DOCTYPE_NAME: Bt
    });
    var Vt = function F(e) {
        e = 0 < arguments.length && void 0 !== e ? e : "undefined" == typeof window ? null : window;
        const c = e => F(e);
        if (c.version = "3.0.8", c.removed = [], !e || !e.document || 9 !== e.document.nodeType) return c.isSupported = !1, 
        c;
        let r = e.document;
        const l = r, H = l.currentScript, {
            DocumentFragment: P,
            HTMLTemplateElement: z,
            Node: s,
            Element: U,
            NodeFilter: t,
            NamedNodeMap: B = e.NamedNodeMap || e.MozNamedAttrMap,
            HTMLFormElement: W,
            DOMParser: V,
            trustedTypes: u
        } = e;
        e = U.prototype;
        const j = Nt(e, "cloneNode"), $ = Nt(e, "nextSibling"), Y = Nt(e, "childNodes"), i = Nt(e, "parentNode");
        "function" == typeof z && (e = r.createElement("template")).content && e.content.ownerDocument && (r = e.content.ownerDocument);
        let d, f = "";
        const {
            implementation: a,
            createNodeIterator: G,
            createDocumentFragment: q,
            getElementsByTagName: X
        } = r, K = l.importNode;
        let o = {};
        c.isSupported = "function" == typeof gt && "function" == typeof i && a && void 0 !== a.createHTMLDocument;
        const {
            MUSTACHE_EXPR: m,
            ERB_EXPR: p,
            TMPLIT_EXPR: h,
            DATA_ATTR: Q,
            ARIA_ATTR: Z,
            IS_SCRIPT_OR_DATA: J,
            ATTR_WHITESPACE: ee
        } = Wt;
        let te = Wt.IS_ALLOWED_URI, g = null;
        const ne = Ve({}, [ ...At, ..._t, ...Mt, ...Lt, ...It ]);
        let v = null;
        const oe = Ve({}, [ ...Ft, ...Ht, ...Pt, ...zt ]);
        let b = Object.seal(vt(null, {
            tagNameCheck: {
                writable: !0,
                configurable: !1,
                enumerable: !0,
                value: null
            },
            attributeNameCheck: {
                writable: !0,
                configurable: !1,
                enumerable: !0,
                value: null
            },
            allowCustomizedBuiltInElements: {
                writable: !0,
                configurable: !1,
                enumerable: !0,
                value: !1
            }
        })), y = null, re = null, ie = !0, ae = !0, le = !1, se = !0, w = !1, x = !1, ce = !1, ue = !1, T = !1, E = !1, k = !1, de = !0, fe = !1;
        const me = "user-content-";
        let pe = !0, C = !1, n = {}, S = null;
        const he = Ve({}, [ "annotation-xml", "audio", "colgroup", "desc", "foreignobject", "head", "iframe", "math", "mi", "mn", "mo", "ms", "mtext", "noembed", "noframes", "noscript", "plaintext", "script", "style", "svg", "template", "thead", "title", "video", "xmp" ]);
        let ge = null;
        const ve = Ve({}, [ "audio", "video", "img", "source", "image", "track" ]);
        let be = null;
        const ye = Ve({}, [ "alt", "class", "for", "id", "label", "name", "pattern", "placeholder", "role", "summary", "title", "value", "style", "xmlns" ]), D = "http://www.w3.org/1998/Math/MathML", N = "http://www.w3.org/2000/svg", A = "http://www.w3.org/1999/xhtml";
        let _ = A, we, xe = null;
        const Te = Ve({}, [ D, N, A ], Tt);
        let M = null;
        const Ee = [ "application/xhtml+xml", "text/html" ];
        let R = null, L = null;
        function ke(e) {
            return e instanceof RegExp || e instanceof Function;
        }
        function Ce() {
            let e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {};
            if (!L || L !== e) {
                if (e = je(e = e && "object" == typeof e ? e : {}), M = -1 === Ee.indexOf(e.PARSER_MEDIA_TYPE) ? "text/html" : e.PARSER_MEDIA_TYPE, 
                R = "application/xhtml+xml" === M ? Tt : xt, g = "ALLOWED_TAGS" in e ? Ve({}, e.ALLOWED_TAGS, R) : ne, 
                v = "ALLOWED_ATTR" in e ? Ve({}, e.ALLOWED_ATTR, R) : oe, xe = "ALLOWED_NAMESPACES" in e ? Ve({}, e.ALLOWED_NAMESPACES, Tt) : Te, 
                be = "ADD_URI_SAFE_ATTR" in e ? Ve(je(ye), e.ADD_URI_SAFE_ATTR, R) : ye, 
                ge = "ADD_DATA_URI_TAGS" in e ? Ve(je(ve), e.ADD_DATA_URI_TAGS, R) : ve, 
                S = "FORBID_CONTENTS" in e ? Ve({}, e.FORBID_CONTENTS, R) : he, 
                y = "FORBID_TAGS" in e ? Ve({}, e.FORBID_TAGS, R) : {}, re = "FORBID_ATTR" in e ? Ve({}, e.FORBID_ATTR, R) : {}, 
                n = "USE_PROFILES" in e && e.USE_PROFILES, ie = !1 !== e.ALLOW_ARIA_ATTR, 
                ae = !1 !== e.ALLOW_DATA_ATTR, le = e.ALLOW_UNKNOWN_PROTOCOLS || !1, 
                se = !1 !== e.ALLOW_SELF_CLOSE_IN_ATTR, w = e.SAFE_FOR_TEMPLATES || !1, 
                x = e.WHOLE_DOCUMENT || !1, T = e.RETURN_DOM || !1, E = e.RETURN_DOM_FRAGMENT || !1, 
                k = e.RETURN_TRUSTED_TYPE || !1, ue = e.FORCE_BODY || !1, de = !1 !== e.SANITIZE_DOM, 
                fe = e.SANITIZE_NAMED_PROPS || !1, pe = !1 !== e.KEEP_CONTENT, C = e.IN_PLACE || !1, 
                te = e.ALLOWED_URI_REGEXP || Ut, _ = e.NAMESPACE || A, b = e.CUSTOM_ELEMENT_HANDLING || {}, 
                e.CUSTOM_ELEMENT_HANDLING && ke(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck) && (b.tagNameCheck = e.CUSTOM_ELEMENT_HANDLING.tagNameCheck), 
                e.CUSTOM_ELEMENT_HANDLING && ke(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck) && (b.attributeNameCheck = e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck), 
                e.CUSTOM_ELEMENT_HANDLING && "boolean" == typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements && (b.allowCustomizedBuiltInElements = e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements), 
                w && (ae = !1), E && (T = !0), n && (g = Ve({}, It), v = [], !0 === n.html && (Ve(g, At), 
                Ve(v, Ft)), !0 === n.svg && (Ve(g, _t), Ve(v, Ht), Ve(v, zt)), !0 === n.svgFilters && (Ve(g, Mt), 
                Ve(v, Ht), Ve(v, zt)), !0 === n.mathMl) && (Ve(g, Lt), Ve(v, Pt), 
                Ve(v, zt)), e.ADD_TAGS && Ve(g = g === ne ? je(g) : g, e.ADD_TAGS, R), 
                e.ADD_ATTR && Ve(v = v === oe ? je(v) : v, e.ADD_ATTR, R), e.ADD_URI_SAFE_ATTR && Ve(be, e.ADD_URI_SAFE_ATTR, R), 
                e.FORBID_CONTENTS && Ve(S = S === he ? je(S) : S, e.FORBID_CONTENTS, R), 
                pe && (g["#text"] = !0), x && Ve(g, [ "html", "head", "body" ]), 
                g.table && (Ve(g, [ "tbody" ]), delete y.tbody), e.TRUSTED_TYPES_POLICY) {
                    if ("function" != typeof e.TRUSTED_TYPES_POLICY.createHTML) throw Dt('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');
                    if ("function" != typeof e.TRUSTED_TYPES_POLICY.createScriptURL) throw Dt('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');
                    d = e.TRUSTED_TYPES_POLICY, f = d.createHTML("");
                } else null !== (d = void 0 === d ? function(e, t) {
                    if ("object" != typeof e || "function" != typeof e.createPolicy) return null;
                    let n = null;
                    var o = "data-tt-policy-suffix", t = "dompurify" + ((n = t && t.hasAttribute(o) ? t.getAttribute(o) : n) ? "#" + n : "");
                    try {
                        return e.createPolicy(t, {
                            createHTML(e) {
                                return e;
                            },
                            createScriptURL(e) {
                                return e;
                            }
                        });
                    } catch (e) {
                        return console.warn("TrustedTypes policy " + t + " could not be created."), 
                        null;
                    }
                }(u, H) : d) && "string" == typeof f && (f = d.createHTML(""));
                Be && Be(e), L = e;
            }
        }
        function O(t) {
            wt(c.removed, {
                element: t
            });
            try {
                t.parentNode.removeChild(t);
            } catch (e) {
                t.remove();
            }
        }
        function Se(e) {
            let t = null, n = null;
            ue ? e = "<remove></remove>" + e : (o = Et(e, /^[\r\n\t ]+/), n = o && o[0]), 
            "application/xhtml+xml" === M && _ === A && (e = '<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>' + e + "</body></html>");
            var o = d ? d.createHTML(e) : e;
            if (_ === A) try {
                t = new V().parseFromString(o, M);
            } catch (e) {}
            if (!t || !t.documentElement) {
                t = a.createDocument(_, "template", null);
                try {
                    t.documentElement.innerHTML = we ? f : o;
                } catch (e) {}
            }
            return o = t.body || t.documentElement, e && n && o.insertBefore(r.createTextNode(n), o.childNodes[0] || null), 
            _ === A ? X.call(t, x ? "html" : "body")[0] : x ? t.documentElement : o;
        }
        function De(e) {
            return G.call(e.ownerDocument || e, e, t.SHOW_ELEMENT | t.SHOW_COMMENT | t.SHOW_TEXT, null);
        }
        function Ne(e) {
            return "function" == typeof s && e instanceof s;
        }
        function Ae(t) {
            let n = null;
            if (I("beforeSanitizeElements", t, null), !((e = t) instanceof W) || "string" == typeof e.nodeName && "string" == typeof e.textContent && "function" == typeof e.removeChild && e.attributes instanceof B && "function" == typeof e.removeAttribute && "function" == typeof e.setAttribute && "string" == typeof e.namespaceURI && "function" == typeof e.insertBefore && "function" == typeof e.hasChildNodes) {
                var e = R(t.nodeName);
                if (I("uponSanitizeElement", t, {
                    tagName: e,
                    allowedTags: g
                }), !t.hasChildNodes() || Ne(t.firstElementChild) || !We(/<[/\w]/g, t.innerHTML) || !We(/<[/\w]/g, t.textContent)) {
                    if (g[e] && !y[e]) return t instanceof U && !function(e) {
                        let t = i(e);
                        t && t.tagName || (t = {
                            namespaceURI: _,
                            tagName: "template"
                        });
                        var n = xt(e.tagName), o = xt(t.tagName);
                        return xe[e.namespaceURI] && (e.namespaceURI === N ? t.namespaceURI === A ? "svg" === n : t.namespaceURI === D ? "svg" === n && ("annotation-xml" === o || Oe[o]) : Boolean(He[n]) : e.namespaceURI === D ? t.namespaceURI === A ? "math" === n : t.namespaceURI === N ? "math" === n && Ie[o] : Boolean(Pe[n]) : e.namespaceURI === A ? !(t.namespaceURI === N && !Ie[o] || t.namespaceURI === D && !Oe[o] || Pe[n]) && (Fe[n] || !He[n]) : "application/xhtml+xml" === M && xe[e.namespaceURI]);
                    }(t) || ("noscript" === e || "noembed" === e || "noframes" === e) && We(/<\/no(script|embed|frames)/i, t.innerHTML) ? (O(t), 
                    !0) : (w && 3 === t.nodeType && (n = t.textContent, bt([ m, p, h ], e => {
                        n = kt(n, e, " ");
                    }), t.textContent !== n) && (wt(c.removed, {
                        element: t.cloneNode()
                    }), t.textContent = n), I("afterSanitizeElements", t, null), 
                    !1);
                    if (!y[e] && _e(e)) {
                        if (b.tagNameCheck instanceof RegExp && We(b.tagNameCheck, e)) return;
                        if (b.tagNameCheck instanceof Function && b.tagNameCheck(e)) return;
                    }
                    if (pe && !S[e]) {
                        var o = i(t) || t.parentNode, r = Y(t) || t.childNodes;
                        if (r && o) for (let e = r.length - 1; 0 <= e; --e) o.insertBefore(j(r[e], !0), $(t));
                    }
                }
            }
            return O(t), 1;
        }
        function _e(e) {
            return 0 < e.indexOf("-");
        }
        function Me(n) {
            I("beforeSanitizeAttributes", n, null);
            var o = n.attributes;
            if (o) {
                var r = {
                    attrName: "",
                    attrValue: "",
                    keepAttr: !0,
                    allowedAttributes: v
                };
                let e = o.length;
                for (;e--; ) {
                    var {
                        name: i,
                        namespaceURI: a,
                        value: l
                    } = o[e], s = R(i);
                    let t = "value" === i ? l : St(l);
                    if (r.attrName = s, r.attrValue = t, r.keepAttr = !0, r.forceKeepAttr = void 0, 
                    I("uponSanitizeAttribute", n, r), t = r.attrValue, !r.forceKeepAttr && (ze(i, n), 
                    r.keepAttr)) if (!se && We(/\/>/i, t)) ze(i, n); else if (w && bt([ m, p, h ], e => {
                        t = kt(t, e, " ");
                    }), l = R(n.nodeName), Ue(l, s, t)) {
                        if (!fe || "id" !== s && "name" !== s || (ze(i, n), t = me + t), 
                        d && "object" == typeof u && "function" == typeof u.getAttributeType && !a) switch (u.getAttributeType(l, s)) {
                          case "TrustedHTML":
                            t = d.createHTML(t);
                            break;

                          case "TrustedScriptURL":
                            t = d.createScriptURL(t);
                        }
                        try {
                            a ? n.setAttributeNS(a, i, t) : n.setAttribute(i, t), 
                            yt(c.removed);
                        } catch (e) {}
                    }
                }
                I("afterSanitizeAttributes", n, null);
            }
        }
        function Re(e) {
            var t, n = De(e);
            for (I("beforeSanitizeShadowDOM", e, null); t = n.nextNode(); ) I("uponSanitizeShadowNode", t, null), 
            Ae(t) || (t.content instanceof P && Re(t.content), Me(t));
            I("afterSanitizeShadowDOM", e, null);
        }
        const Le = r.createElement("form"), Oe = Ve({}, [ "mi", "mo", "mn", "ms", "mtext" ]), Ie = Ve({}, [ "foreignobject", "desc", "title", "annotation-xml" ]), Fe = Ve({}, [ "title", "style", "font", "a", "script" ]), He = Ve({}, [ ..._t, ...Mt, ...Rt ]), Pe = Ve({}, [ ...Lt, ...Ot ]), ze = function(e, t) {
            try {
                wt(c.removed, {
                    attribute: t.getAttributeNode(e),
                    from: t
                });
            } catch (e) {
                wt(c.removed, {
                    attribute: null,
                    from: t
                });
            }
            if (t.removeAttribute(e), "is" === e && !v[e]) if (T || E) try {
                O(t);
            } catch (e) {} else try {
                t.setAttribute(e, "");
            } catch (e) {}
        }, I = function(e, t, n) {
            o[e] && bt(o[e], e => {
                e.call(c, t, n, L);
            });
        }, Ue = function(e, t, n) {
            if (de && ("id" === t || "name" === t) && (n in r || n in Le)) return !1;
            if ((!ae || re[t] || !We(Q, t)) && (!ie || !We(Z, t))) if (!v[t] || re[t]) {
                if (!(_e(e) && (b.tagNameCheck instanceof RegExp && We(b.tagNameCheck, e) || b.tagNameCheck instanceof Function && b.tagNameCheck(e)) && (b.attributeNameCheck instanceof RegExp && We(b.attributeNameCheck, t) || b.attributeNameCheck instanceof Function && b.attributeNameCheck(t)) || "is" === t && b.allowCustomizedBuiltInElements && (b.tagNameCheck instanceof RegExp && We(b.tagNameCheck, n) || b.tagNameCheck instanceof Function && b.tagNameCheck(n)))) return !1;
            } else if (!be[t] && !We(te, kt(n, ee, "")) && ("src" !== t && "xlink:href" !== t && "href" !== t || "script" === e || 0 !== Ct(n, "data:") || !ge[e]) && (!le || We(J, kt(n, ee, ""))) && n) return !1;
            return !0;
        };
        return c.sanitize = function(e) {
            var t, n = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {};
            let o = null, r = null;
            if ("string" != typeof (e = (we = !e) ? "\x3c!--\x3e" : e) && !Ne(e)) {
                if ("function" != typeof e.toString) throw Dt("toString is not a function");
                if ("string" != typeof (e = e.toString())) throw Dt("dirty is not a string, aborting");
            }
            if (!c.isSupported) return e;
            if (ce || Ce(n), c.removed = [], C = "string" != typeof e && C) {
                if (e.nodeName) {
                    n = R(e.nodeName);
                    if (!g[n] || y[n]) throw Dt("root node is forbidden and cannot be sanitized in-place");
                }
            } else if (e instanceof s) 1 === (n = (o = Se("\x3c!----\x3e")).ownerDocument.importNode(e, !0)).nodeType && "BODY" === n.nodeName || "HTML" === n.nodeName ? o = n : o.appendChild(n); else {
                if (!T && !w && !x && -1 === e.indexOf("<")) return d && k ? d.createHTML(e) : e;
                if (!(o = Se(e))) return T ? null : k ? f : "";
            }
            o && ue && O(o.firstChild);
            for (var i = De(C ? e : o); t = i.nextNode(); ) Ae(t) || (t.content instanceof P && Re(t.content), 
            Me(t));
            if (C) return e;
            if (T) {
                if (E) for (r = q.call(o.ownerDocument); o.firstChild; ) r.appendChild(o.firstChild); else r = o;
                return r = v.shadowroot || v.shadowrootmode ? K.call(l, r, !0) : r;
            }
            let a = x ? o.outerHTML : o.innerHTML;
            return x && g["!doctype"] && o.ownerDocument && o.ownerDocument.doctype && o.ownerDocument.doctype.name && We(Bt, o.ownerDocument.doctype.name) && (a = "<!DOCTYPE " + o.ownerDocument.doctype.name + ">\n" + a), 
            w && bt([ m, p, h ], e => {
                a = kt(a, e, " ");
            }), d && k ? d.createHTML(a) : a;
        }, c.setConfig = function() {
            var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {};
            Ce(e), ce = !0;
        }, c.clearConfig = function() {
            L = null, ce = !1;
        }, c.isValidAttribute = function(e, t, n) {
            return L || Ce({}), e = R(e), t = R(t), Ue(e, t, n);
        }, c.addHook = function(e, t) {
            "function" == typeof t && (o[e] = o[e] || [], wt(o[e], t));
        }, c.removeHook = function(e) {
            if (o[e]) return yt(o[e]);
        }, c.removeHooks = function(e) {
            o[e] && (o[e] = []);
        }, c.removeAllHooks = function() {
            o = {};
        }, c;
    }(), He = window, Pe = document, jt = /^image\/(p?jpe?g|gif|png|bmp)$/i;
    function $t(e, t) {
        var n;
        m(e, function(e) {
            Le(e, !0) ? (n || e.nodeType === ge ? /\S/.test(e.nodeValue) : !De(e, ".sceditor-ignore")) && (n || Ne(n = ve("p", {}, t), e), 
            we(n, e)) : n = null;
        }, !1, !0);
    }
    function ze(r, e) {
        var i, y, u, a, o, c, d, l, w, s, f, m, t, p, h, g, v, b, F, H, n, x, P, z, T, E, U, B, W, V, j, $, Y, G, q, X, K, Q, Z, k, J, ee, te, ne, oe, C, re, S, ie, ae, le, se, D, ce, N, ue, A, _ = this, M = {}, R = [], L = {}, de = {}, O = (_.commands = Ye(!0, {}, e.commands || Fe), 
        _.opts = Ye(!0, {}, dt, e)), fe = (Array.isArray(O.allowedIframeUrls) || (O.allowedIframeUrls = []), 
        O.allowedIframeUrls.push("https://youtube.com/embed/"), O.allowedIframeUrls.push("https://player.vimeo.com/video/"), 
        O.allowedIframeUrls.push("https://www.instagram.com/p/"), O.allowedIframeUrls.push("https://www.facebook.com/plugins/"), 
        Vt());
        function I(e) {
            var t = [ "iframe" ].concat(O.allowedTags), n = [ "allowfullscreen", "frameborder", "target" ].concat(O.allowedAttributes);
            return fe.sanitize(e, {
                ADD_TAGS: t,
                ADD_ATTR: n
            });
        }
        fe.addHook("uponSanitizeElement", function(e, t) {
            var n = O.allowedIframeUrls;
            if ("iframe" === t.tagName) {
                var o = ke(e, "src") || "";
                for (let e = 0; e < n.length; e++) {
                    var r = n[e];
                    if (me(r) && o.substr(0, r.length) === r) return;
                    if (r.test && r.test(o)) return;
                }
                ye(e);
            }
        }), fe.addHook("afterSanitizeAttributes", function(e) {
            "target" in e && ke(e, "data-sce-target", ke(e, "target")), Ce(e, "target");
        }), e = function() {
            r._sceditor = _, O.locale && "en" !== O.locale && W(), Ne(y = ve("div", {
                className: "sceditor-container card"
            }), r), Se(y, "z-index", O.zIndex), H = r.required, r.required = !1;
            function e() {
                Ee(He, "load", e), O.autofocus && le(!!O.autofocusEnd), A(), S(), 
                h.call("ready"), "onReady" in i && i.onReady.call(_);
            }
            var t = ze.formats[O.format];
            i = t ? new t() : {}, h = new ft(_), (O.plugins || "").split(",").forEach(function(e) {
                h.register(e.trim());
            }), "init" in i && i.init.call(_), V(), B(), j(), $(), ht || _.toggleSourceMode(), 
            C();
            Te(He, "load", e), "complete" === Pe.readyState && e();
        }, W = function() {
            var e;
            (t = ze.locale[O.locale]) || (e = O.locale.split("-"), t = ze.locale[e[0]]), 
            t && t.dateFormat && (O.dateFormat = t.dateFormat);
        }, B = function() {
            l = ve("textarea"), a = ve("iframe", {
                frameborder: 0,
                allowfullscreen: !0
            }), _e(w = ve("div"), "card-footer"), _e(w, "text-body-secondary"), 
            _e(w, "text-end"), _e(w, "small"), _e(w, "p-2"), w.appendChild(nt(_._("Characters remaining:") + '<span id="editor-Counter" class="badge bg-secondary ms-1"></span>')), 
            O.startInSourceMode ? (_e(y, "sourceMode"), qe(a)) : (_e(y, "wysiwygMode"), 
            qe(l)), O.spellcheck || ke(y, "spellcheck", "false"), "https:" === He.location.protocol && ke(a, "src", "about:blank"), 
            ke(l, "title", "source"), we(y, a), we(y, l), we(y, w), _.dimensions(O.width || Ze(r), O.height || Re(r)), 
            (d = a.contentDocument).open();
            var t = "", e = (O.styles.forEach(e => {
                t += Ie("style", {
                    style: e
                });
            }), d.write(Ie("html", {
                spellcheck: O.spellcheck ? "" : 'spellcheck="false"',
                charset: O.charset,
                themeMode: O.themeMode,
                styles: t
            })), d.close(), c = d.body, o = a.contentWindow, _.readOnly(!!O.readOnly), 
            pt && (Re(c, "100%"), Te(c, "touchend", _.focus)), ke(r, "tabindex")), e = (ke(l, "tabindex", e), 
            ke(a, "tabindex", e), p = new mt(o, null, I), qe(r), _.val(r.value), 
            O.placeholder || ke(r, "placeholder"));
            e && (l.placeholder = e, ke(c, "placeholder", e));
        }, j = function() {
            O.autoUpdate && (Te(c, "blur", ue), Te(l, "blur", ue)), null === O.rtl && (O.rtl = "rtl" === Se(l, "direction")), 
            _.rtl(!!O.rtl), O.autoExpand && (Te(c, "load", A, !0), Te(c, "input keyup", A)), 
            O.resizeEnabled && Y(), ke(y, "id", O.id);
        }, $ = function() {
            var e = r.form, t = "compositionstart compositionend", n = "keydown keyup keypress focus blur contextmenu input", o = "onselectionchange" in d ? "selectionchange" : "keyup focus blur contextmenu mouseup touchend click";
            Te(Pe, "click", ne), e && (Te(e, "reset", k), Te(e, "submit", _.updateOriginal, !0)), 
            Te(window, "pagehide", _.updateOriginal), Te(window, "pageshow", k), 
            Te(c, "keypress", Z), Te(c, "keydown", K), Te(c, "keydown", Q), Te(c, "keyup", S), 
            Te(c, "blur", ce), Te(c, "keyup", N), Te(c, "paste", G), Te(c, "cut copy", q), 
            Te(c, t, ee), Te(c, o, ie), Te(c, n, te), Te(c, "blur", function() {
                _.val() || _e(c, "placeholder");
            }), Te(c, "focus", function() {
                Qe(c, "placeholder");
            }), Te(l, "blur", ce), Te(l, "keyup", N), Te(l, "keydown", K), Te(l, t, ee), 
            Te(l, n, te), Te(d, "mousedown", J), Te(d, o, ie), Te(d, "keyup", S), 
            Te(y, "selectionchanged", ae), Te(y, "selectionchanged", C), Te(y, "selectionchanged valuechanged nodechanged pasteraw paste", te);
        }, V = function() {
            var i, a = _.commands, l = (O.toolbarExclude || "").split(","), e = O.toolbar.split("|");
            u = ve("div", {
                className: "card-header btn-toolbar",
                unselectable: "on"
            }), O.icons in ze.icons && (E = new ze.icons[O.icons]()), pe(e, function(e, t) {
                i = ve("div", {
                    className: "btn-group btn-group-sm m-1"
                }), pe(t.split(","), function(e, t) {
                    var n, o, r = a[t];
                    !r || -1 < l.indexOf(t) || (n = r.shortcut, o = Ie("toolbarButton", {
                        name: t
                    }, !0).firstChild, "source" === t ? o.classList.add("btn-secondary") : o.classList.add("btn-primary"), 
                    E && E.create && E.create(t) && Ne(E.create(t), o.firstChild), 
                    o._sceTxtMode = !!r.txtExec, o._sceWysiwygMode = !!r.exec, Me(o, "disabled", !r.exec), 
                    Te(o, "click", function(e) {
                        Ae(o, "disabled") || U(o, r), C(), e.preventDefault();
                    }), Te(o, "mousedown", function(e) {
                        _.closeDropDown(), e.preventDefault();
                    }), r.tooltip && ke(o, "title", _._(r.tooltip) + (n ? " (" + n + ")" : "")), 
                    n && _.addShortcut(n, t), r.state ? R.push({
                        name: t,
                        state: r.state
                    }) : me(r.exec) && R.push({
                        name: t,
                        state: r.exec
                    }), we(i, o), de[t] = o);
                }), i.firstChild && we(u, i);
            }), we(O.toolbarContainer || y, u);
        }, Y = function() {
            var e = ve("div", {
                className: "sceditor-grip"
            }), t = "touchmove mousemove", n = "touchcancel touchend mouseup", o = 0, r = 0, i = 0, a = 0, l = 0, s = 0, c = Ze(y), u = Re(y), d = !1, f = _.rtl(), m = O.resizeMinHeight || u / 1.5, p = O.resizeMaxHeight || 2.5 * u, h = O.resizeMinWidth || c / 1.25, g = O.resizeMaxWidth || 1.25 * c, v = function(e) {
                a = ("touchmove" === e.type ? (e = He.event, i = e.changedTouches[0].pageX, 
                e.changedTouches[0]) : (i = e.pageX, e)).pageY;
                var t = s + (a - r), n = f ? l - (i - o) : l + (i - o);
                0 < g && g < n && (n = g), 0 < h && n < h && (n = h), O.resizeWidth || (n = !1), 
                0 < p && p < t && (t = p), 0 < m && t < m && (t = m), O.resizeHeight || (t = !1), 
                (n || t) && _.dimensions(n, t), e.preventDefault();
            }, b = function(e) {
                d && (d = !1, Qe(y, "resizing"), Ee(Pe, t, v), Ee(Pe, n, b), e.preventDefault());
            };
            E && E.create && (u = E.create("grip")) && we(e, u), we(y, w), we(y, e), 
            Te(e, "touchstart mousedown", function(e) {
                r = ("touchstart" === e.type ? (e = He.event, o = e.touches[0].pageX, 
                e.touches[0]) : (o = e.pageX, e)).pageY, l = Ze(y), s = Re(y), d = !0, 
                _e(y, "resizing"), Te(Pe, t, v), Te(Pe, n, b), e.preventDefault();
            });
        }, le = function(e) {
            var t, n = c.firstChild;
            if (et(y)) if (_.sourceMode()) t = e ? l.value.length : 0, l.setSelectionRange(t, t); else {
                if (lt(c), e) for ((n = c.lastChild) || (n = ve("p", {}, d), we(c, n)); n.lastChild; ) De(n = n.lastChild, "br") && n.previousSibling && (n = n.previousSibling);
                t = d.createRange(), it(n) ? t.selectNodeContents(n) : (t.setStartBefore(n), 
                e && t.setStartAfter(n)), t.collapse(!e), p.selectRange(t), b = t, 
                e && (c.scrollTop = c.scrollHeight), _.focus();
            }
        }, _.readOnly = function(e) {
            return "boolean" != typeof e ? !l.readonly : (c.contentEditable = !e, 
            l.readonly = !e, oe(e), _);
        }, _.rtl = function(e) {
            var t = e ? "rtl" : "ltr";
            return "boolean" != typeof e ? "rtl" === ke(l, "dir") : (ke(c, "dir", t), 
            ke(l, "dir", t), Qe(y, "rtl"), Qe(y, "ltr"), _e(y, t), E && E.rtl && E.rtl(e), 
            _);
        }, oe = function(n) {
            var o = _.inSourceMode() ? "_sceTxtMode" : "_sceWysiwygMode";
            pe(de, function(e, t) {
                Me(t, "disabled", n || !t[o]);
            });
        }, _.width = function(e, t) {
            return e || 0 === e ? (_.dimensions(e, null, t), _) : Ze(y);
        }, _.dimensions = function(e, t, n) {
            return t = !(!t && 0 !== t) && t, !1 === (e = !(!e && 0 !== e) && e) && !1 === t ? {
                width: _.width(),
                height: _.height()
            } : (!1 !== e && (!1 !== n && (O.width = e), Ze(y, e)), !1 !== t && (!1 !== n && (O.height = t), 
            Re(y, t)), _);
        }, _.height = function(e, t) {
            return e || 0 === e ? (_.dimensions(null, e, t), _) : Re(y);
        }, _.maximize = function(e) {
            var t = "sceditor-maximize";
            return Ue(e) ? Ae(y, t) : ((e = !!e) && (z = He.scrollY), Me(Pe.documentElement, t, e), 
            Me(Pe.body, t, e), Me(y, t, e), _.width(e ? "100%" : O.width, !1), _.height(e ? "100%" : O.height, !1), 
            e || He.scrollTo(0, z), A(), _);
        }, A = function() {
            O.autoExpand && !P && (P = setTimeout(_.expandToContent, 200));
        }, _.expandToContent = function(e) {
            var t, n;
            _.maximize() || (clearTimeout(P), P = !1, x || (n = O.resizeMinHeight || O.height || Re(r), 
            x = {
                min: n,
                max: O.resizeMaxHeight || 2 * n
            }), (n = Pe.createRange()).selectNodeContents(c), n = n.getBoundingClientRect(), 
            t = d.documentElement.clientHeight - 1, n = n.bottom - n.top, n = _.height() + 1 + (n - t), 
            e || -1 === x.max || (n = Math.min(n, x.max)), _.height(Math.ceil(Math.max(n, x.min))));
        }, _.destroy = function() {
            var e;
            h && (h.destroy(), h = p = null, s && ye(s), Ee(Pe, "click", ne), (e = r.form) && (Ee(e, "reset", k), 
            Ee(e, "submit", _.updateOriginal, !0)), Ee(window, "pagehide", _.updateOriginal), 
            Ee(window, "pageshow", k), ye(l), ye(u), ye(y), delete r._sceditor, 
            Xe(r), r.required = H);
        }, _.createDropDown = function(e, t, n) {
            var t = "sceditor-" + t;
            _.closeDropDown(), s && Ae(s, t) || (e = Ye({
                top: e.offsetTop,
                left: e.parentElement.offsetLeft + e.offsetLeft,
                marginTop: e.clientHeight
            }, O.dropDownCss), Se(s = ve("div", {
                className: "dropdown-menu show sceditor-dropdown " + t
            }), e), we(s, n), we(y, s), Te(s, "click focusin", function(e) {
                e.stopPropagation();
            }), s && (t = xe(s, "input,textarea")[0]) && t.focus());
        }, ne = function(e) {
            3 !== e.which && s && !e.defaultPrevented && (ue(), _.closeDropDown());
        }, q = function(n) {
            var o = p.selectedRange();
            if (o) {
                var r, i = ve("div", {}, d);
                let e, t = o.commonAncestorContainer;
                for (;t && Le(t, !0); ) t.nodeType === he && (r = t.cloneNode(), 
                i.firstChild && we(r, i.firstChild), we(i, r), e = e || r), t = t.parentNode;
                we(e || i, o.cloneContents()), lt(i), n.clipboardData.setData("text/html", i.innerHTML), 
                pe(xe(i, "p"), function(e, t) {
                    rt(t, "div");
                }), pe(xe(i, "br"), function(e, t) {
                    t.nextSibling && Le(t.nextSibling, !0) || ye(t);
                }), we(c, i), n.clipboardData.setData("text/plain", i.innerText), 
                ye(i), "cut" === n.type && o.deleteContents(), n.preventDefault();
            }
        }, G = function(e) {
            var t, n, o = c, r = e.clipboardData;
            if (r) {
                var i = {}, a = r.types, l = r.items;
                e.preventDefault();
                for (let e = 0; e < a.length; e++) {
                    if (a.indexOf("text/html") < 0 && He.FileReader && l && jt.test(l[e].type)) return t = r.items[e].getAsFile(), 
                    n = void 0, (n = new FileReader()).onload = function(e) {
                        X({
                            html: '<img src="' + e.target.result + '" />'
                        });
                    }, void n.readAsDataURL(t);
                    i[a[e]] = r.getData(a[e]);
                }
                i.text = i["text/plain"], i.html = I(i["text/html"]), X(i);
            } else if (!T) {
                var s = o.scrollTop;
                for (p.saveRange(), T = Pe.createDocumentFragment(); o.firstChild; ) we(T, o.firstChild);
                setTimeout(function() {
                    var e = o.innerHTML;
                    o.innerHTML = "", we(o, T), o.scrollTop = s, T = !1, p.restoreRange(), 
                    X({
                        html: I(e)
                    });
                }, 0);
            }
        }, X = function(e) {
            var t = ve("div", {}, d), e = (h.call("pasteRaw", e), Je(y, "pasteraw", e), 
            e.html ? (t.innerHTML = I(e.html), at(t)) : t.innerHTML = Oe(e.text || ""), 
            {
                val: t.innerHTML
            }), t = ("fragmentToSource" in i && (e.val = i.fragmentToSource(e.val, d, g)), 
            h.call("paste", e), Je(y, "paste", e), "fragmentToHtml" in i && (e.val = i.fragmentToHtml(e.val, g)), 
            h.call("pasteHtml", e), p.getFirstBlockParent());
            _.wysiwygEditorInsertHtml(e.val, null, !0), function e(t) {
                if (t.nodeType === he) {
                    for (var n = t.parentNode, o = t.tagName, r = t.childNodes.length; r--; ) e(t.childNodes[r]);
                    if (Le(t) && "BR" !== o) {
                        for (r = t.style.length; r--; ) {
                            var i = t.style[r];
                            Se(n, i) === Se(t, i) && t.style.removeProperty(i);
                        }
                        if (!t.style.length) if (Ce(t, "style"), "FONT" === o && (Se(t, "fontFamily").toLowerCase() === Se(n, "fontFamily").toLowerCase() && Ce(t, "face"), 
                        Se(t, "color") === Se(n, "color") && Ce(t, "color"), Se(t, "fontSize") === Se(n, "fontSize")) && Ce(t, "size"), 
                        !t.attributes.length && /SPAN|FONT/.test(o)) ut(t); else if (/B|STRONG|EM|SPAN|FONT/.test(o)) for (var a = /B|STRONG/.test(o), l = "EM" === o; n && Le(n) && (!a || /bold|700/i.test(Se(n, "fontWeight"))) && (!l || "italic" === Se(n, "fontStyle")); ) {
                            if ((n.tagName === o || a && /B|STRONG/.test(n.tagName)) && ct(n, t)) {
                                ut(t);
                                break;
                            }
                            n = n.parentNode;
                        }
                        var s = t.nextSibling;
                        s && s.tagName === o && ct(s, t) && (we(t, s), ut(s));
                    }
                }
            }(t);
        }, _.closeDropDown = function(e) {
            s && (ye(s), s = null), !0 === e && _.focus();
        }, _.wysiwygEditorInsertHtml = function(e, t, n) {
            var o = Re(a);
            _.focus(), !n && be(v, "code") || (p.insertHTML(e, t), p.saveRange(), 
            at(c), $t(c, d), Xe(n = xe(c, "#sceditor-end-marker")[0]), e = c.scrollTop, 
            t = st(n).top + 1.5 * n.offsetHeight - o, qe(n), (e < t || t + o < e) && (c.scrollTop = t), 
            D(!1), p.restoreRange(), S());
        }, _.wysiwygEditorInsertText = function(e, t) {
            _.wysiwygEditorInsertHtml(Oe(e), Oe(t));
        }, _.insertText = function(e, t) {
            return _.inSourceMode() ? _.sourceEditorInsertText(e, t) : _.wysiwygEditorInsertText(e, t), 
            _;
        }, _.sourceEditorInsertText = function(e, t) {
            var n, o = l.selectionStart, r = l.selectionEnd, i = l.scrollTop;
            l.focus(), n = l.value, t && (e += n.substring(o, r) + t), l.value = n.substring(0, o) + e + n.substring(r, n.length), 
            l.selectionStart = o + e.length - (t ? t.length : 0), l.selectionEnd = l.selectionStart, 
            l.scrollTop = i, l.focus(), D();
        }, _.getRangeHelper = function() {
            return p;
        }, _.sourceEditorCaret = function(e) {
            return l.focus(), e ? (l.selectionStart = e.start, l.selectionEnd = e.end, 
            this) : {
                start: l.selectionStart,
                end: l.selectionEnd
            };
        }, _.val = function(e, t) {
            return me(e) ? (_.inSourceMode() ? _.setSourceEditorValue(e) : (!1 !== t && "toHtml" in i && (e = i.toHtml(e)), 
            _.setWysiwygEditorValue(e)), _) : _.inSourceMode() ? _.getSourceEditorValue(!1) : _.getWysiwygEditorValue(t);
        }, _.insert = function(t, n, o, e, r) {
            if (_.inSourceMode()) _.sourceEditorInsertText(t, n); else {
                if (n) {
                    let e = p.selectedHtml();
                    t += (e = !1 !== o && "fragmentToSource" in i ? i.fragmentToSource(e, d, g) : e) + n;
                }
                !1 !== o && "fragmentToHtml" in i && (t = i.fragmentToHtml(t, g)), 
                !1 !== o && !0 === r && (t = t.replace(/&lt;/g, "<").replace(/&gt;/g, ">").replace(/&amp;/g, "&")), 
                _.wysiwygEditorInsertHtml(t);
            }
            return _;
        }, _.getWysiwygEditorValue = function(e) {
            var t, n = ve("div", {}, d), o = c.childNodes;
            for (let e = 0; e < o.length; e++) we(n, o[e].cloneNode(!0));
            return we(c, n), at(n), ye(n), t = n.innerHTML, t = !1 !== e && i.hasOwnProperty("toSource") ? i.toSource(t, d) : t;
        }, _.getBody = function() {
            return c;
        }, _.getContentAreaContainer = function() {
            return a;
        }, _.getSourceEditorValue = function(e) {
            var t = l.value;
            return t = !1 !== e && "toHtml" in i ? i.toHtml(t) : t;
        }, _.getSourceEditor = function() {
            return l;
        }, _.setWysiwygEditorValue = function(e) {
            c.innerHTML = I(e = e || "<p><br /></p>"), S(), D(), A();
        }, _.setSourceEditorValue = function(e) {
            l.value = e, D();
        }, _.updateOriginal = function() {
            r.value = _.val();
        }, _.inSourceMode = function() {
            return Ae(y, "sourceMode");
        }, _.sourceMode = function(e) {
            var t = _.inSourceMode();
            return "boolean" != typeof e ? t : ((t && !e || !t && e) && _.toggleSourceMode(), 
            _);
        }, _.toggleSourceMode = function() {
            var e = _.inSourceMode();
            !ht && e || (e || (p.saveRange(), p.clear()), b = null, _.blur(), e ? _.setWysiwygEditorValue(_.getSourceEditorValue()) : _.setSourceEditorValue(_.getWysiwygEditorValue()), 
            Ke(l), Ke(a), Me(y, "wysiwygMode", e), Me(y, "sourceMode", !e), oe(), 
            C(), void 0 !== _.opts.onToggleMode && _.opts.onToggleMode(_));
        }, re = function() {
            return l.focus(), l.value.substring(l.selectionStart, l.selectionEnd);
        }, U = function(e, t) {
            _.inSourceMode() ? t.txtExec && (Array.isArray(t.txtExec) ? _.sourceEditorInsertText.apply(_, t.txtExec) : t.txtExec.call(_, e, re())) : t.exec && ($e(t.exec) ? t.exec.call(_, e) : _.execCommand(t.exec, t.hasOwnProperty("execParam") ? t.execParam : null));
        }, _.execCommand = function(e, t) {
            var n = !1, o = _.commands[e];
            if (_.focus(), !be(p.parentNode(), "code")) {
                try {
                    n = d.execCommand(e, !1, t);
                } catch (e) {}
                !n && o && o.errorMessage && alert(_._(o.errorMessage)), C();
            }
        }, ie = function() {
            function e() {
                if (o.getSelection() && o.getSelection().rangeCount <= 0) b = null; else if (p && !p.compare(b)) {
                    if ((b = p.cloneSelected()) && b.collapsed) {
                        let e = b.startContainer;
                        var t = b.startOffset;
                        for (t && e.nodeType !== ge && (e = e.childNodes[t]); e && e.parentNode !== c; ) e = e.parentNode;
                        e && Le(e, !0) && (p.saveRange(), $t(c, d), p.restoreRange());
                    }
                    Je(y, "selectionchanged");
                }
                F = !1;
            }
            F || (F = !0, "onselectionchange" in d ? e() : setTimeout(e, 100));
        }, ae = function() {
            var e, t = p.parentNode();
            g !== t && (e = g, g = t, v = p.getFirstBlockParent(t), Je(y, "nodechanged", {
                oldNode: e,
                newNode: g
            }));
        }, _.currentNode = function() {
            return g;
        }, _.currentBlockNode = function() {
            return v;
        }, C = function() {
            var n, o, r = "active", i = d, a = _.sourceMode();
            if (_.readOnly()) pe(xe(u, r), function(e, t) {
                Qe(t, r);
            }); else {
                a || (o = p.parentNode(), n = p.getFirstBlockParent(o));
                for (let t = 0; t < R.length; t++) {
                    let e = 0;
                    var l = de[R[t].name], s = R[t].state, c = a && !l._sceTxtMode || !a && !l._sceWysiwygMode;
                    if (me(s)) {
                        if (!a) try {
                            -1 < (e = i.queryCommandEnabled(s) ? 0 : -1) && (e = i.queryCommandState(s) ? 1 : 0);
                        } catch (e) {}
                    } else c || (e = s.call(_, o, n));
                    Me(l, "disabled", c || e < 0), Me(l, r, 0 < e);
                }
                E && E.update && E.update(a, o, n);
            }
        }, Z = function(t) {
            if (!t.defaultPrevented && (_.closeDropDown(), 13 === t.which)) if (!De(v, "li,ul,ol") && ot(v)) {
                var n = ve("br", {}, d), o = (p.insertNode(n), n.parentNode);
                let e = o.lastChild;
                e && e.nodeType === ge && "" === e.nodeValue && (ye(e), e = o.lastChild), 
                !Le(o, !0) && e === n && Le(n.previousSibling) && p.insertHTML("<br>"), 
                t.preventDefault();
            }
        }, S = function() {
            tt(c, function(e) {
                var t;
                if (e.nodeType === he && !/inline/.test(Se(e, "display")) && (!De(e, ".sceditor-nlf") && ot(e))) return (t = ve("p", {}, d)).className = "sceditor-nlf", 
                t.innerHTML = "<br />", we(c, t), !1;
                if (3 === e.nodeType && !/^\s*$/.test(e.nodeValue) || De(e, "br")) return !1;
            });
        }, k = function() {
            _.val(r.value);
        }, J = function() {
            _.closeDropDown();
        }, _._ = function() {
            var n = arguments;
            return t && t[n[0]] && (n[0] = t[n[0]]), n[0].replace(/\{(\d+)\}/g, function(e, t) {
                return void 0 !== n[+t + 1] ? n[+t + 1] : "{" + t + "}";
            });
        }, te = function(t) {
            h && h.call(t.type + "Event", t, _);
            var e = (t.target === l ? "scesrc" : "scewys") + t.type;
            M[e] && M[e].forEach(function(e) {
                e.call(_, t);
            });
        }, _.bind = function(e, t, n, o) {
            for (var r, i, a = (e = e.split(" ")).length; a--; ) $e(t) && (r = "scewys" + e[a], 
            i = "scesrc" + e[a], n || (M[r] = M[r] || [], M[r].push(t)), o || (M[i] = M[i] || [], 
            M[i].push(t)), "valuechanged" === e[a]) && (D.hasHandler = !0);
            return _;
        }, _.unbind = function(e, t, n, o) {
            for (var r = (e = e.split(" ")).length; r--; ) $e(t) && (n || Ge(M["scewys" + e[r]] || [], t), 
            o || Ge(M["scesrc" + e[r]] || [], t));
            return _;
        }, _.blur = function(e, t, n) {
            return $e(e) ? _.bind("blur", e, t, n) : (_.sourceMode() ? l : c).blur(), 
            _;
        }, _.focus = function(e, t, n) {
            if ($e(e)) _.bind("focus", e, t, n); else if (_.inSourceMode()) l.focus(); else {
                if (xe(d, ":focus").length) return;
                e = p.selectedRange();
                b || le(!0), e && 1 === e.endOffset && e.collapsed && (t = e.endContainer) && 1 === t.childNodes.length && De(t.firstChild, "br") && (e.setStartBefore(t.firstChild), 
                e.collapse(!0), p.selectRange(e)), o.focus(), c.focus();
            }
            return C(), _;
        }, _.keyDown = function(e, t, n) {
            return _.bind("keydown", e, t, n);
        }, _.keyPress = function(e, t, n) {
            return _.bind("keypress", e, t, n);
        }, _.keyUp = function(e, t, n) {
            return _.bind("keyup", e, t, n);
        }, _.nodeChanged = function(e) {
            return _.bind("nodechanged", e, !1, !0);
        }, _.selectionChanged = function(e) {
            return _.bind("selectionchanged", e, !1, !0);
        }, _.valueChanged = function(e, t, n) {
            return _.bind("valuechanged", e, t, n);
        }, _.css = function(e) {
            return n || (n = ve("style", {
                id: "inline"
            }, d), we(d.head, n)), me(e) ? (n.styleSheet ? n.styleSheet.cssText = e : n.innerHTML = e, 
            _) : n.styleSheet ? n.styleSheet.cssText : n.innerHTML;
        }, K = function(t) {
            var n = [], o = {
                "`": "~",
                1: "!",
                2: "@",
                3: "#",
                4: "$",
                5: "%",
                6: "^",
                7: "&",
                8: "*",
                9: "(",
                0: ")",
                "-": "_",
                "=": "+",
                ";": ": ",
                "'": '"',
                ",": "<",
                ".": ">",
                "/": "?",
                "\\": "|",
                "[": "{",
                "]": "}"
            }, r = {
                109: "-",
                110: "del",
                111: "/",
                96: "0",
                97: "1",
                98: "2",
                99: "3",
                100: "4",
                101: "5",
                102: "6",
                103: "7",
                104: "8",
                105: "9"
            }, i = t.which, a = {
                8: "backspace",
                9: "tab",
                13: "enter",
                19: "pause",
                20: "capslock",
                27: "esc",
                32: "space",
                33: "pageup",
                34: "pagedown",
                35: "end",
                36: "home",
                37: "left",
                38: "up",
                39: "right",
                40: "down",
                45: "insert",
                46: "del",
                91: "win",
                92: "win",
                93: "select",
                96: "0",
                97: "1",
                98: "2",
                99: "3",
                100: "4",
                101: "5",
                102: "6",
                103: "7",
                104: "8",
                105: "9",
                106: "*",
                107: "+",
                109: "-",
                110: ".",
                111: "/",
                112: "f1",
                113: "f2",
                114: "f3",
                115: "f4",
                116: "f5",
                117: "f6",
                118: "f7",
                119: "f8",
                120: "f9",
                121: "f10",
                122: "f11",
                123: "f12",
                144: "numlock",
                145: "scrolllock",
                186: ";",
                187: "=",
                188: ",",
                189: "-",
                190: ".",
                191: "/",
                192: "`",
                219: "[",
                220: "\\",
                221: "]",
                222: "'"
            }[i] || String.fromCharCode(i).toLowerCase();
            if ((t.ctrlKey || t.metaKey) && n.push("ctrl"), t.altKey && n.push("alt"), 
            t.shiftKey && (n.push("shift"), r[i] ? a = r[i] : o[a] && (a = o[a])), 
            a && (i < 16 || 18 < i) && n.push(a), n = n.join("+"), L[n] && !1 === L[n].call(_) && (t.stopPropagation(), 
            t.preventDefault()), "]" === t.key && _.inSourceMode()) {
                r = l, o = r.selectionStart, i = r.value.slice(0, o), a = r.value.slice(r.selectionEnd, r.value.length);
                let e;
                try {
                    e = i.match(/\[([^\]]+)$/)[1].match(/^([a-z1-6]+)/)[1];
                } catch (t) {}
                -1 < [ "b", "i", "u", "h", "code", "img", "quote", "left", "center", "right", "indent", "list", "color", "size", "albumimg", "attach", "youtube", "vimeo", "instagram", "twitter", "facebook", "googlewidget", "spoiler", "userlink", "googlemaps", "hide", "group-hide", "hide-thanks", "hide-reply-thanks", "hide-reply", "hide-posts", "dailymotion", "audio", "media" ].indexOf(e) && (n = `[/${e}]`, 
                r.value = i + n + a, r.selectionStart = r.selectionEnd = o, r.focus());
            }
        }, _.addShortcut = function(e, t) {
            return e = e.toLowerCase(), me(t) ? L[e] = function() {
                return U(de[t], _.commands[t]), !1;
            } : L[e] = t, _;
        }, _.removeShortcut = function(e) {
            return delete L[e.toLowerCase()], _;
        }, Q = function(e) {
            var t, n, o;
            if (!O.disableBlockRemove && 8 === e.which && (n = p.selectedRange()) && (t = n.startContainer, 
            0 === n.startOffset) && (o = se()) && !De(o, "body")) {
                for (;t !== o; ) {
                    for (;t.previousSibling; ) if ((t = t.previousSibling).nodeType !== ge || t.nodeValue) return;
                    if (!(t = t.parentNode)) return;
                }
                _.clearBlockFormatting(o), e.preventDefault();
            }
        }, se = function() {
            for (var e = v; !ot(e) || Le(e, !0); ) if (!(e = e.parentNode) || De(e, "body")) return;
            return e;
        }, _.clearBlockFormatting = function(e) {
            return (e = e || se()) && !De(e, "body") && (p.saveRange(), e.className = "", 
            ke(e, "style", ""), De(e, "p,div,td") || rt(e, "p"), p.restoreRange()), 
            _;
        }, D = function(e) {
            var t, n, o;
            h && (h.hasHandler("valuechangedEvent") || D.hasHandler) && (o = !(n = _.sourceMode()) && p.hasSelection(), 
            e = (f = !1) !== e && !d.getElementById("sceditor-start-marker"), m && (clearTimeout(m), 
            m = !1), o && e && p.saveRange(), (t = n ? l.value : c.innerHTML) !== D.lastVal && (D.lastVal = t, 
            Je(y, "valuechanged", {
                rawValue: n ? _.val() : t
            })), o) && e && p.removeMarkers();
        }, ce = function() {
            m && D();
        }, N = function(e) {
            var e = e.which, t = N.lastChar, n = 13 === t || 32 === t, t = 8 === t || 46 === t;
            N.lastChar = e, f || (13 === e || 32 === e ? n ? N.triggerNext = !0 : D() : 8 === e || 46 === e ? t ? N.triggerNext = !0 : D() : N.triggerNext && (D(), 
            N.triggerNext = !1), clearTimeout(m), m = setTimeout(function() {
                f || D();
            }, 1500));
        }, ee = function(e) {
            (f = /start/i.test(e.type)) || D();
        }, ue = function() {
            _.updateOriginal();
        }, e();
    }
    ze.locale = {}, ze.formats = {}, ze.icons = {}, ze.command = {
        get: function(e) {
            return Fe[e] || null;
        },
        set: function(e, t) {
            return !(!e || !t) && ((t = Ye(Fe[e] || {}, t)).remove = function() {
                ze.command.remove(e);
            }, Fe[e] = t, this);
        },
        remove: function(e) {
            return Fe[e] && delete Fe[e], this;
        }
    }, window.sceditor = {
        command: ze.command,
        commands: Fe,
        defaultOptions: dt,
        ios: pt,
        isWysiwygSupported: ht,
        regexEscape: w,
        escapeEntities: Oe,
        escapeUriScheme: function(e) {
            var t, n = window.location;
            return e && /^[^\/]*:/i.test(e) && !y.test(e) ? ((t = n.pathname.split("/")).pop(), 
            n.protocol + "//" + n.host + t.join("/") + "/" + e) : e;
        },
        dom: {
            css: Se,
            attr: ke,
            removeAttr: Ce,
            is: De,
            closest: be,
            width: Ze,
            height: Re,
            traverse: m,
            rTraverse: tt,
            parseHTML: nt,
            hasStyling: ot,
            convertElement: rt,
            blockLevelList: p,
            canHaveChildren: it,
            isInline: Le,
            copyCSS: function(e, t) {
                t.style && e.style && (t.style.cssText = e.style.cssText + t.style.cssText);
            },
            fixNesting: at,
            findCommonAncestor: function(e, t) {
                for (;e = e.parentNode; ) if ((n = e) !== (o = t) && n.contains && n.contains(o)) return e;
                var n, o;
            },
            getSibling: g,
            removeWhiteSpace: lt,
            extractContents: v,
            getOffset: st,
            getStyle: b,
            hasStyle: function(e, t, n) {
                return !!(e = b(e, t)) && (!n || e === n || Array.isArray(n) && -1 < n.indexOf(e));
            }
        },
        locale: ze.locale,
        icons: ze.icons,
        utils: {
            each: pe,
            isEmptyObject: l,
            extend: Ye
        },
        plugins: ft.plugins,
        formats: ze.formats,
        create: function(e, t) {
            t = t || {}, u(e, ".sceditor-container") || (t.runWithoutWysiwygSupport || ht) && new ze(e, t);
        },
        instance: function(e) {
            return e._sceditor;
        }
    };
}();

!function(t) {
    "use strict";
    var l, f = t.escapeEntities, r = t.escapeUriScheme, h = t.dom, e = t.utils, p = h.css, s = h.attr, g = h.is, n = e.extend, v = e.each, i = t.command.get, b = {
        always: 1,
        never: 2,
        auto: 3
    }, o = {
        bold: {
            txtExec: [ "[b]", "[/b]" ]
        },
        italic: {
            txtExec: [ "[i]", "[/i]" ]
        },
        underline: {
            txtExec: [ "[u]", "[/u]" ]
        },
        strike: {
            txtExec: [ "[s]", "[/s]" ]
        },
        mark: {
            txtExec: [ "[h]", "[/h]" ]
        },
        left: {
            txtExec: [ "[left]", "[/left]" ]
        },
        center: {
            txtExec: [ "[center]", "[/center]" ]
        },
        right: {
            txtExec: [ "[right]", "[/right]" ]
        },
        justify: {
            txtExec: [ "[justify]", "[/justify]" ]
        },
        font: {
            txtExec: function(t) {
                var e = this;
                i("font")._dropDown(e, t, function(t) {
                    e.insertText(`[font=${t}]`, "[/font]");
                });
            }
        },
        size: {
            txtExec: function(t) {
                var e = this;
                i("size")._dropDown(e, t, function(t) {
                    e.insertText(`[size=${t}]`, "[/size]");
                });
            }
        },
        color: {
            txtExec: function(t) {
                var e = this;
                i("color")._dropDown(e, t, function(t) {
                    e.insertText(`[color=${t}]`, "[/color]");
                });
            }
        },
        bulletlist: {
            txtExec: function(t, e) {
                this.insertText(`[ul]
[li]${e.split(/\r?\n/).join("[/li]\n[li]")}[/li]
[/ul]`);
            }
        },
        orderedlist: {
            txtExec: function(t, e) {
                this.insertText(`[ol]
[li]${e.split(/\r?\n/).join("[/li]\n[li]")}[/li]
[/ol]`);
            }
        },
        code: {
            txtExec: function(t) {
                var e = this;
                i("code")._dropDown(e, t, function(t) {
                    e.insertText(`[code=${t}]`, "[/code]");
                });
            }
        },
        extensions: {
            txtExec: function(t) {
                var e = this;
                i("extensions")._dropDown(e, t, function(t) {
                    e.insertText(`[${t}]`, `[/${t}]`);
                });
            }
        },
        image: {
            txtExec: function(t, n) {
                var r = this;
                i("image")._dropDown(r, t, function(t, e) {
                    e || n ? r.insertText(`[img=${t}]${e || n || t}[/img]`) : r.insertText(`[img]${t}[/img]`);
                });
            }
        },
        email: {
            txtExec: function(t, n) {
                var r = this;
                i("email")._dropDown(r, t, function(t, e) {
                    r.insertText(`[email=${t}]${e || n || t}[/email]`);
                });
            }
        },
        link: {
            txtExec: function(t, n) {
                var r = this;
                i("link")._dropDown(r, t, function(t, e) {
                    n || e ? r.insertText(`[url=${t}]${e || n || t}[/url]`) : r.insertText(`[url]${t}[/url]`);
                });
            }
        },
        quote: {
            txtExec: [ "[quote]", "[/quote]" ]
        },
        userlink: {
            txtExec: [ "[userlink]", "[/userlink]" ]
        },
        albums: {
            txtExec: function(t) {
                var e = this;
                i("albums")._dropDown(e, t, function(t) {
                    e.insertText(`[albumid]${t}[/albumid]`);
                });
            }
        },
        attachments: {
            txtExec: function(t) {
                var e = this;
                i("attachments")._dropDown(e, t, function(t) {
                    e.insertText(`[attach]${t}[/attach]`);
                });
            }
        },
        media: {
            txtExec: function(t) {
                var e = this;
                i("media")._dropDown(e, t, function(t) {
                    e.insertText(`[media]${t}[/media]`);
                });
            }
        },
        vimeo: {
            txtExec: function(t) {
                var e = this;
                i("vimeo")._dropDown(e, t, function(t) {
                    e.insertText(`[vimeo]${t}[/vimeo]`);
                });
            }
        },
        instagram: {
            txtExec: function(t) {
                var e = this;
                i("instagram")._dropDown(e, t, function(t) {
                    e.insertText(`[instagram]${t}[/instagram]`);
                });
            }
        },
        facebook: {
            txtExec: function(t) {
                var e = this;
                i("facebook")._dropDown(e, t, function(t) {
                    e.insertText(`[facebook]${t}[/facebook]`);
                });
            }
        },
        youtube: {
            txtExec: function(t) {
                var e = this;
                i("youtube")._dropDown(e, t, function(t) {
                    e.insertText(`[youtube]${t}[/youtube]`);
                });
            }
        }
    }, y = {
        b: {
            tags: {
                b: null,
                strong: null
            },
            styles: {
                "font-weight": [ "bold", "bolder", "401", "700", "800", "900" ]
            },
            format: "[b]{0}[/b]",
            html: "<strong>{0}</strong>"
        },
        i: {
            tags: {
                i: null,
                em: null
            },
            styles: {
                "font-style": [ "italic", "oblique" ]
            },
            format: "[i]{0}[/i]",
            html: "<em>{0}</em>"
        },
        u: {
            tags: {
                u: null
            },
            styles: {
                "text-decoration": [ "underline" ]
            },
            format: "[u]{0}[/u]",
            html: "<u>{0}</u>"
        },
        s: {
            tags: {
                s: null,
                strike: null
            },
            styles: {
                "text-decoration": [ "line-through" ]
            },
            format: "[s]{0}[/s]",
            html: "<s>{0}</s>"
        },
        sub: {
            tags: {
                sub: null
            },
            format: "[sub]{0}[/sub]",
            html: "<sub>{0}</sub>"
        },
        sup: {
            tags: {
                sup: null
            },
            format: "[sup]{0}[/sup]",
            html: "<sup>{0}</sup>"
        },
        h: {
            tags: {
                h: null,
                mark: null
            },
            format: "[h]{0}[/h]",
            html: "<mark>{0}</mark>"
        },
        font: {
            tags: {
                font: {
                    face: null
                }
            },
            styles: {
                "font-family": null
            },
            quoteType: b.never,
            format: function(t, e) {
                var n;
                return `[font=${a(n = g(t, "font") && (n = s(t, "face")) ? n : p(t, "font-family"))}]${e}[/font]`;
            },
            html: '<font face="{defaultattr}">{0}</font>'
        },
        size: {
            tags: {
                font: {
                    size: null
                }
            },
            styles: {
                "font-size": null
            },
            format: function(t, e) {
                var n = s(t, "size"), r = 2;
                return -1 < (n = n || p(t, "fontSize")).indexOf("px") ? ((n = +n.replace("px", "")) < 12 && (r = 1), 
                15 < n && (r = 3), 17 < n && (r = 4), 23 < n && (r = 5), 31 < n && (r = 6), 
                47 < n && (r = 7)) : r = n, `[size=${r}]${e}[/size]`;
            },
            html: '<font size="{defaultattr}">{!0}</font>'
        },
        color: {
            tags: {
                font: {
                    color: null
                }
            },
            styles: {
                color: null
            },
            quoteType: b.never,
            format: function(t, e) {
                var n;
                return `[color=${d(n = g(t, "font") && (n = s(t, "color")) ? n : t.style.color || p(t, "color"))}]${e}[/color]`;
            },
            html: function(t, e, n) {
                return `<font color="${f(d(e.defaultattr), !0)}">${n}</font>`;
            }
        },
        ul: {
            tags: {
                ul: null
            },
            breakStart: !0,
            isInline: !1,
            skipLastLineBreak: !0,
            format: "[ul]{0}[/ul]",
            html: "<ul>{0}</ul>"
        },
        list: {
            breakStart: !0,
            isInline: !1,
            skipLastLineBreak: !0,
            html: "<ul>{0}</ul>"
        },
        ol: {
            tags: {
                ol: null
            },
            breakStart: !0,
            isInline: !1,
            skipLastLineBreak: !0,
            format: "[ol]{0}[/ol]",
            html: "<ol>{0}</ol>"
        },
        li: {
            tags: {
                li: null
            },
            isInline: !1,
            closedBy: [ "/ul", "/ol", "/list", "*", "li" ],
            format: "[li]{0}[/li]",
            html: "<li>{0}</li>"
        },
        "*": {
            isInline: !1,
            closedBy: [ "/ul", "/ol", "/list", "*", "li" ],
            html: "<li>{0}</li>"
        },
        hr: {
            tags: {
                hr: null
            },
            allowsEmpty: !0,
            isSelfClosing: !0,
            isInline: !1,
            format: "[hr]{0}",
            html: "<hr />"
        },
        img: {
            allowsEmpty: !0,
            tags: {
                img: {
                    src: null,
                    class: "img-user-posted img-thumbnail"
                }
            },
            allowedChildren: [ "#" ],
            quoteType: b.never,
            format: function(t) {
                var e = s(t, "alt");
                return e ? `[img=${s(t, "src")}]${e}[/img]` : `[img]${s(t, "src")}[/img]`;
            },
            html: function(t, e, n) {
                return e.defaultattr = f(e.defaultattr, !0) || n, `<img src="${r(e.defaultattr)}" alt="${n}" class="img-user-posted img-thumbnail" />`;
            }
        },
        userlink: {
            allowsEmpty: !0,
            tags: {
                span: {
                    class: "badge rounded-pill text-bg-secondary fs-6"
                }
            },
            format: function(t) {
                return `[userlink]${s(t, "data-user")}[/userlink]`;
            },
            html: function(t, e, n) {
                return `<span class="badge rounded-pill text-bg-secondary fs-6" data-user="${f(n)}">${f(n)}</span>`;
            }
        },
        albumimg: {
            allowsEmpty: !0,
            tags: {
                div: {
                    src: null,
                    class: "card text-bg-dark"
                }
            },
            allowedChildren: [ "#" ],
            quoteType: b.never,
            format: function(t) {
                return `[albumimg]${s(t, "alt")}[/albumimg]`;
            },
            html: function(t, e, n) {
                return e.defaultattr = f(e.defaultattr, !0) || n, `<div class="card text-bg-dark" style="max-width:200px" alt="${n}"><img src="${l.albumsPreviewUrl}${r(e.defaultattr)}" class="img-user-posted card-img-top" style="max-height:200px;max-width:200px;object-fit:contain""></div>`;
            }
        },
        url: {
            allowsEmpty: !0,
            tags: {
                a: {
                    href: null
                }
            },
            quoteType: b.never,
            format: function(t, e) {
                t = s(t, "href");
                return "mailto:" === t.substr(0, 7) ? `[email="${t.substr(7)}"]${e}[/email]` : `[url=${t}]${e}[/url]`;
            },
            html: function(t, e, n) {
                return e.defaultattr = f(e.defaultattr, !0) || n, `<a href="${r(e.defaultattr)}" class="link">${n}</a>`;
            }
        },
        email: {
            quoteType: b.never,
            html: function(t, e, n) {
                return `<a href="mailto:${f(e.defaultattr, !0) || n}">${n}</a>`;
            }
        },
        quote: {
            tags: {
                div: {
                    class: "border rounded mx-3 mb-3 p-3 border-secondary shadow-sm"
                }
            },
            isInline: !1,
            quoteType: b.never,
            format: function(t, e) {
                var n, r = "", i = t.children;
                for (let t = 0; !n && t < i.length; t++) g(i[t], "cite") && (n = i[t]);
                return n && (r = n && n.textContent, n && t.removeChild(n), e = this.elementToBbcode(t), 
                r = "=" + r.replace(/(^\s+|\s+$)/g, ""), n) && t.insertBefore(n, t.firstChild), 
                `[quote${r}]${e}[/quote]`;
            },
            html: function(t, e, n) {
                return `<div class="border rounded mx-3 mb-3 p-3 border-secondary shadow-sm"><span contenteditable="false"><i class="fa fa-quote-left text-primary fs-4 me-2"></i></span>${n = e.defaultattr ? n + '<cite class="card-text text-end d-block text-body-secondary small">' + f(e.defaultattr) + "</cite>" : n}</div>`;
            }
        },
        code: {
            tags: {
                code: {
                    class: null
                }
            },
            isInline: !1,
            allowedChildren: [ "#", "#newline" ],
            format: function(t, e) {
                var n;
                return `[code=${(n = g(t, "code") && (n = s(t, "class")) ? n : t.className.replace("language-", "")).replace("language-", "")}]${e}[/code]`;
            },
            html: '<pre class="border border-danger rounded m-2 p-2"><code class="language-{defaultattr}">{0}</code></pre>'
        },
        left: {
            styles: {
                "text-align": [ "left", "-webkit-left", "-moz-left", "-khtml-left" ]
            },
            isInline: !1,
            allowsEmpty: !0,
            format: "[left]{0}[/left]",
            html: '<div align="left">{0}</div>'
        },
        center: {
            styles: {
                "text-align": [ "center", "-webkit-center", "-moz-center", "-khtml-center" ]
            },
            isInline: !1,
            allowsEmpty: !0,
            format: "[center]{0}[/center]",
            html: '<div align="center">{0}</div>'
        },
        right: {
            styles: {
                "text-align": [ "right", "-webkit-right", "-moz-right", "-khtml-right" ]
            },
            isInline: !1,
            allowsEmpty: !0,
            format: "[right]{0}[/right]",
            html: '<div align="right">{0}</div>'
        },
        justify: {
            styles: {
                "text-align": [ "justify", "-webkit-justify", "-moz-justify", "-khtml-justify" ]
            },
            isInline: !1,
            allowsEmpty: !0,
            format: "[justify]{0}[/justify]",
            html: '<div align="justify">{0}</div>'
        },
        facebook: {
            allowsEmpty: !0,
            tags: {
                div: {
                    "data-facebook-url": null
                }
            },
            format: function(t, e) {
                return (t = s(t, "data-facebook-url")) ? `[facebook]${t}[/facebook]` : e;
            },
            html: function(t, e, n) {
                return `<div class="ratio ratio-1x1" data-oembed-url="${n}" data-facebook-url="${n}"><iframe src="https://www.facebook.com/plugins/post.php?href=${n}"></iframe></div>`;
            }
        },
        instagram: {
            allowsEmpty: !0,
            tags: {
                div: {
                    "data-instagram-url": null
                }
            },
            format: function(t, e) {
                return (t = s(t, "data-instagram-url")) ? `[instagram]${t}[/instagram]` : e;
            },
            html: function(t, e, n) {
                var r;
                return `<div class="ratio ratio-1x1" data-oembed-url="https://www.instagram.com/p/${r = n.match(/\/(p|tv|reel)\/(.*?)\//)[2]}" data-instagram-url="${n}"><iframe src="https://www.instagram.com/p/${r}/embed/captioned/"></iframe></div>`;
            }
        },
        vimeo: {
            allowsEmpty: !0,
            tags: {
                div: {
                    "data-vimeo-url": null
                }
            },
            format: function(t, e) {
                return (t = s(t, "data-vimeo-url")) ? `[vimeo]${t}[/vimeo]` : e;
            },
            html: function(t, e, n) {
                var r = n.match(/vimeo\..*\/(\d+)(?:$|\/)/)[1];
                return `<div data-oembed-url="https://vimeo.com/${r}" data-vimeo-url="${n}" class="ratio ratio-16x9 border"><iframe src="https://player.vimeo.com/video/${r}?show_title=1&show_byline=1&show_portrait=1&fullscreen=1"></iframe></div>`;
            }
        },
        youtube: {
            allowsEmpty: !0,
            tags: {
                div: {
                    "data-youtube-url": null
                }
            },
            format: function(t, e) {
                return (t = s(t, "data-youtube-url")) ? `[youtube]${t}[/youtube]` : e;
            },
            html: function(t, e, n) {
                var r = n, n = n.match(/(?:v=|v\/|embed\/|youtu.be\/)?([a-zA-Z0-9_-]{11})/)[1];
                return `<div data-oembed-url="https://youtube.com/embed/${n}" data-youtube-url="${r}" class="ratio ratio-16x9 border"><iframe src="https://youtube.com/embed/${n}?hd=1"></iframe></div>`;
            }
        },
        rtl: {
            styles: {
                direction: [ "rtl" ]
            },
            isInline: !1,
            format: "[rtl]{0}[/rtl]",
            html: '<div style="direction: rtl">{0}</div>'
        },
        ltr: {
            styles: {
                direction: [ "ltr" ]
            },
            isInline: !1,
            format: "[ltr]{0}[/ltr]",
            html: '<div style="direction: ltr">{0}</div>'
        },
        ignore: {}
    };
    function x(t, r) {
        return t.replace(/\{([^}]+)\}/g, function(t, e) {
            var n = !0;
            return "!" === e.charAt(0) && (n = !1, e = e.substring(1)), "0" === e && (n = !1), 
            void 0 === r[e] ? t : n ? f(r[e], !0) : r[e];
        });
    }
    function k(t) {
        return "function" == typeof t;
    }
    function a(t) {
        return t && t.replace(/\\(.)/g, "$1").replace(/^(["'])(.*?)\1$/, "$2");
    }
    var $ = "open", w = "content", E = "newline", T = "close";
    function u(t, e, n, r, i, l) {
        var o = this;
        o.type = t, o.name = e, o.val = n, o.attrs = r || {}, o.children = i || [], 
        o.closing = l || null;
    }
    function B(t) {
        var h = this;
        function o(t, e) {
            var n, r, i;
            return t === $ && (n = e.match(/\[([^\]\s=]+)(?:([^\]]+))?\]/)) && (i = l(n[1]), 
            n[2]) && (n[2] = n[2].trim()) && (r = function(t) {
                var e;
                var n = /([^\s=]+)=(?:(?:(["'])((?:\\\2|[^\2])*?)\2)|((?:.(?!\s\S+=))*.))/g, r = {};
                if ("=" === t.charAt(0) && t.indexOf("=", 1) < 0) r.defaultattr = a(t.substr(1)); else for ("=" === t.charAt(0) && (t = "defaultattr" + t); e = n.exec(t); ) r[l(e[1])] = a(e[3]) || e[4];
                return r;
            }(n[2])), t === T && (n = e.match(/\[\/([^\[\]]+)\]/)) && (i = l(n[1])), 
            (i = t === E ? "#newline" : i) && (t !== $ && t !== T || y[i]) || (t = w, 
            i = "#"), new u(t, i, e, r);
        }
        function d(t, e, n) {
            for (var r = n.length; r--; ) if (n[r].type === e && n[r].name === t) return 1;
        }
        function m(t, e) {
            t = (t ? y[t.name] : {}).allowedChildren;
            return !h.opts.fixInvalidChildren || !t || -1 < t.indexOf(e.name || "#");
        }
        function c(t, e) {
            for (var n, r, i, l, o, a, s = "", u = function(t) {
                return !1 !== (!t || (void 0 !== t.isHtmlInline ? t.isHtmlInline : t.isInline));
            }; 0 < t.length; ) if (n = t.shift()) {
                if (n.type === $) a = n.children[n.children.length - 1] || {}, r = y[n.name], 
                l = e && u(r), i = c(n.children, !1), a = r && r.html ? (u(r) || !u(y[a.name]) || r.isPreFormatted || r.skipLastLineBreak, 
                k(r.html) ? r.html.call(h, n, n.attrs, i) : (n.attrs[0] = i, x(r.html, n.attrs))) : n.val + i + (n.closing ? n.closing.val : ""); else {
                    if (n.type === E) {
                        if (!e) continue;
                        o || (s += "<div>"), s += "<br />", t.length || (s += "<br />"), 
                        s += "</div>\n", o = !1;
                        continue;
                    }
                    l = e, a = f(n.val, !0);
                }
                l && !o ? (s += "<div>", o = !0) : !l && o && (s += "</div>\n", 
                o = !1), s += a;
            }
            return o && (s += "</div>\n"), s;
        }
        function p(t, e, n) {
            var r = /\s|=/.test(t);
            return k(e) ? e(t, n) : e === b.never || e === b.auto && !r ? t : `"${t.replace(/\\/g, "\\\\").replace(/"/g, '\\"')}"`;
        }
        function g(t) {
            return t.length ? t[t.length - 1] : null;
        }
        function l(t) {
            return t.toLowerCase();
        }
        h.opts = n({}, B.defaults, t), h.tokenize = function(t) {
            var e, n, r, i = [], l = [ {
                type: w,
                regex: /^([^\[\r\n]+|\[)/
            }, {
                type: E,
                regex: /^(\r\n|\r|\n)/
            }, {
                type: $,
                regex: /^\[[^\[\]]+\]/
            }, {
                type: T,
                regex: /^\[\/[^\[\]]+\]/
            } ];
            t: for (;t.length; ) {
                for (r = l.length; r--; ) if (n = l[r].type, (e = t.match(l[r].regex)) && e[0]) {
                    i.push(o(n, e[0])), t = t.substr(e[0].length);
                    continue t;
                }
                t.length && i.push(o(w, t)), t = "";
            }
            return i;
        }, h.parse = function(t, e) {
            var t = function(t) {
                function e() {
                    return g(f);
                }
                function n(t) {
                    (e() ? e().children : c).push(t);
                }
                function r(t) {
                    return e() && (l = y[e().name]) && l.closedBy && -1 < l.closedBy.indexOf(t);
                }
                var i, l, o, a, s, u = [], c = [], f = [];
                for (;i = t.shift(); ) switch (s = t[0], m(e(), i) || i.type === T && e() && i.name === e().name || (i.name = "#", 
                i.type = w), i.type) {
                  case $:
                    r(i.name) && f.pop(), n(i), (l = y[i.name]) && !l.isSelfClosing && (l.closedBy || d(i.name, T, t)) ? f.push(i) : l && l.isSelfClosing || (i.type = w);
                    break;

                  case T:
                    if (e() && i.name !== e().name && r("/" + i.name) && f.pop(), 
                    e() && i.name === e().name) e().closing = i, f.pop(); else if (d(i.name, $, f)) {
                        for (;o = f.pop(); ) {
                            if (o.name === i.name) {
                                o.closing = i;
                                break;
                            }
                            o = o.clone(), u.length && o.children.push(g(u)), u.push(o);
                        }
                        for (s && s.type === E && (l = y[i.name]) && !1 === l.isInline && (n(s), 
                        t.shift()), n(g(u)), a = u.length; a--; ) f.push(u[a]);
                        u.length = 0;
                    } else i.type = w, n(i);
                    break;

                  case E:
                    e() && s && r((s.type === T ? "/" : "") + s.name) && (s.type === T && s.name === e().name || ((l = y[e().name]) && l.breakAfter || l && !1 === l.isInline && h.opts.breakAfterBlock && !1 !== l.breakAfter) && f.pop()), 
                    n(i);
                    break;

                  default:
                    n(i);
                }
                return c;
            }(h.tokenize(t)), n = h.opts;
            return n.fixInvalidNesting && function t(e, n, r, i) {
                var l, o, a, s, u;
                const c = function(t) {
                    const e = y[t.name];
                    return !e || !1 !== e.isInline;
                };
                n = n || [];
                i = i || e;
                for (o = 0; o < e.length; o++) if ((l = e[o]) && l.type === $) {
                    if (r && !c(l)) {
                        if (a = g(n), u = a.splitAt(l), s = 1 < n.length ? n[n.length - 2].children : i, 
                        m(l, a)) {
                            const f = a.clone();
                            f.children = l.children, l.children = [ f ];
                        }
                        if (-1 < (a = s.indexOf(a))) {
                            u.children.splice(0, 1), s.splice(a + 1, 0, l, u);
                            const d = u.children[0];
                            return void (d && d.type === E && !c(l) && (u.children.splice(0, 1), 
                            s.splice(a + 2, 0, d)));
                        }
                    }
                    n.push(l), t(l.children, n, r || c(l), i), n.pop();
                }
            }(t), function t(e, n, r) {
                var i, l, o, a, s, u, c, f;
                var d = e.length;
                n && (a = y[n.name]);
                var m = d;
                for (;m--; ) (i = e[m]) && (i.type === E ? (l = 0 < m ? e[m - 1] : null, 
                o = m < d - 1 ? e[m + 1] : null, f = !1, !r && a && !0 !== a.isSelfClosing && (l ? u || o || (!1 === a.isInline && h.opts.breakEndBlock && !1 !== a.breakEnd && (f = !0), 
                a.breakEnd && (f = !0), u = f) : (!1 === a.isInline && h.opts.breakStartBlock && !1 !== a.breakStart && (f = !0), 
                a.breakStart && (f = !0))), l && l.type === $ && (s = y[l.name]) && (r ? !1 === s.isInline && (f = !0) : (!1 === s.isInline && h.opts.breakAfterBlock && !1 !== s.breakAfter && (f = !0), 
                s.breakAfter && (f = !0))), !r && !c && o && o.type === $ && (s = y[o.name]) && (!1 === s.isInline && h.opts.breakBeforeBlock && !1 !== s.breakBefore && (f = !0), 
                s.breakBefore && (f = !0), c = f) ? e.splice(m, 1) : (f && e.splice(m, 1), 
                c = !1)) : i.type === $ && t(i.children, i, r));
            }(t, null, e), n.removeEmptyTags && function t(e) {
                var n, r;
                const i = function(t) {
                    for (var e = t.length; e--; ) {
                        const n = t[e].type;
                        if (n === $ || n === T) return !1;
                        if (n === w && /\S|\u00A0/.test(t[e].val)) return !1;
                    }
                    return !0;
                };
                var l = e.length;
                for (;l--; ) (n = e[l]) && n.type === $ && (r = y[n.name], t(n.children), 
                i(n.children)) && r && !r.isSelfClosing && !r.allowsEmpty && e.splice.apply(e, [ l, 1 ].concat(n.children));
            }(t), t;
        }, h.toHTML = function(t, e) {
            return c(h.parse(t, e), !0);
        }, h.toHTMLFragment = function(t, e) {
            return c(h.parse(t, e), !1);
        }, h.toBBCode = function(t, e) {
            return function t(e) {
                var n, r, i, l, o, a, s, u, c, f = "";
                for (;0 < e.length; ) if (n = e.shift()) if (i = y[n.name], c = !(!i || !1 !== i.isInline), 
                l = i && i.isSelfClosing, a = c && h.opts.breakBeforeBlock && !1 !== i.breakBefore || i && i.breakBefore, 
                s = c && !l && h.opts.breakStartBlock && !1 !== i.breakStart || i && i.breakStart, 
                u = c && h.opts.breakEndBlock && !1 !== i.breakEnd || i && i.breakEnd, 
                c = c && h.opts.breakAfterBlock && !1 !== i.breakAfter || i && i.breakAfter, 
                o = (i ? i.quoteType : null) || h.opts.quoteType || b.auto, i || n.type !== $) if (n.type === $) {
                    if (a && (f += "\n"), f += "[" + n.name, n.attrs) for (r in n.attrs.defaultattr && (f += "=" + p(n.attrs.defaultattr, o, "defaultattr"), 
                    delete n.attrs.defaultattr), n.attrs) n.attrs.hasOwnProperty(r) && (f += ` ${r}=` + p(n.attrs[r], o, r));
                    f += "]", s && (f += "\n"), n.children && (f += t(n.children)), 
                    l || i.excludeClosing || (u && (f += "\n"), f += `[/${n.name}]`), 
                    c && (f += "\n"), n.closing && l && (f += n.closing.val);
                } else f += n.val; else f += n.val, n.children && (f += t(n.children)), 
                n.closing && (f += n.closing.val);
                return f;
            }(h.parse(t, e));
        };
    }
    function c(t) {
        return t = parseInt(t, 10), isNaN(t) ? "00" : (t = Math.max(0, Math.min(t, 255)).toString(16)).length < 2 ? "0" + t : t;
    }
    function d(t) {
        var e;
        return (e = (t = t || "#000").match(/rgb\((\d{1,3}),\s*?(\d{1,3}),\s*?(\d{1,3})\)/i)) ? "#" + c(e[1]) + c(e[2]) + c(e[3]) : (e = t.match(/#([0-9a-f])([0-9a-f])([0-9a-f])\s*?$/i)) ? "#" + e[1] + e[1] + e[2] + e[2] + e[3] + e[3] : t;
    }
    function m() {
        var u = this, i = (u.stripQuotes = a, {}), d = {
            ul: [ "li", "ol", "ul" ],
            ol: [ "li", "ol", "ul" ],
            table: [ "tr" ],
            tr: [ "td", "th" ],
            code: [ "br", "p", "div" ]
        };
        function m(l, o, e) {
            function a(t) {
                var e = t[0], t = t[1], n = h.getStyle(l, e), r = l.parentNode;
                return !(!n || r && h.hasStyle(r, e, n)) && (!t || t.includes(n));
            }
            function t(t) {
                i[t] && i[t][e] && v(i[t][e], function(t, e) {
                    var n, r = y[t].strictMatch, i = (r = void 0 === r ? u.opts.strictMatch : r) ? "every" : "some";
                    if (!e || e[i]((n = r, function(t) {
                        var e = t[0], t = t[1];
                        return ("style" !== e || "CODE" !== l.nodeName) && ("style" === e && t ? t[n ? "every" : "some"](a) : (e = s(l, e)) && (!t || t.includes(e)));
                    }))) return e = y[t].format, o = k(e) ? e.call(u, l, o) : function(t) {
                        var n = arguments;
                        return t.replace(/\{(\d+)\}/g, function(t, e) {
                            return void 0 !== n[+e + 1] ? n[+e + 1] : `{${e}}`;
                        });
                    }(e, o), !1;
                });
            }
            return t("*"), t(l.nodeName.toLowerCase()), o;
        }
        function c(t, e) {
            function f(t, s, u) {
                var c = "";
                return h.traverse(t, function(t) {
                    var e = "", n = t.nodeType, r = t.nodeName.toLowerCase(), i = "code" === r, l = d[r], o = t.firstChild, a = !0;
                    u && !(a = -1 < u.indexOf(r)) && (l = u), 1 === n ? g(t, ".sceditor-nlf") && !o || ("iframe" !== r && (e = f(t, s || i, l)), 
                    a ? (s || (i || (e = m(t, e, !1)), e = m(t, e, !0)), c += function(n, r) {
                        var i, l, o = n.nodeName.toLowerCase(), a = h.isInline;
                        if (!a(n, !0) || "br" === o) {
                            let t;
                            let e = n.previousSibling;
                            for (;e && 1 === e.nodeType && !g(e, "br") && a(e, !0) && !e.firstChild; ) e = e.previousSibling;
                            for (;l = (i = n.parentNode) && i.lastChild, t = l === n, 
                            (n = i) && t && a(i, !0); );
                            t && "li" !== o || (r += "\n"), "br" !== o && e && !g(e, "br") && a(e, !0) && (r = `
` + r);
                        }
                        return r;
                    }(t, e)) : c += e) : 3 === n && (c += t.nodeValue);
                }, !1, !0), c;
            }
            return f(t, e);
        }
        function t(t, e, n) {
            var r = new B(u.opts.parserOptions), t = t || n ? r.toHTMLFragment : r.toHTML;
            return l = u.opts, t(u.opts.bbcodeTrim ? e.trim() : e);
        }
        function e(t, e, n, r) {
            n = n || document;
            var i, l = !!h.closest(r, "code"), o = n.createElement("div"), a = n.createElement("div"), s = new B(u.opts.parserOptions);
            for (a.innerHTML = e, p(o, "visibility", "hidden"), o.appendChild(a), 
            n.body.appendChild(o), t && (o.insertBefore(n.createTextNode("#"), o.firstChild), 
            o.appendChild(n.createTextNode("#"))), r && p(a, "whiteSpace", p(r, "whiteSpace")), 
            i = a.getElementsByClassName("sceditor-ignore"); i.length; ) i[0].parentNode.removeChild(i[0]);
            return h.removeWhiteSpace(o), e = c(a, l), n.body.removeChild(o), e = s.toBBCode(e, !0), 
            e = u.opts.bbcodeTrim ? e.trim() : e;
        }
        u.init = function() {
            u.opts = this.opts, u.elementToBbcode = c, v(y, function(n, t) {
                var r = !1 === t.isInline, t = y[n].tags, e = y[n].styles;
                e && (i["*"] = i["*"] || {}, i["*"][r] = i["*"][r] || {}, i["*"][r][n] = [ [ "style", Object.entries(e) ] ]), 
                t && v(t, function(t, e) {
                    e && e.style && (e.style = Object.entries(e.style)), i[t] = i[t] || {}, 
                    i[t][r] = i[t][r] || {}, i[t][r][n] = e && Object.entries(e);
                });
            }), this.commands = n(!0, {}, o, this.commands), this.toBBCode = u.toSource, 
            this.fromBBCode = u.toHtml;
        }, u.toHtml = t.bind(null, !1), u.fragmentToHtml = t.bind(null, !0), u.toSource = e.bind(null, !1), 
        u.fragmentToSource = e.bind(null, !0);
    }
    u.prototype = {
        clone: function() {
            var t = this;
            return new u(t.type, t.name, t.val, n({}, t.attrs), [], t.closing ? t.closing.clone() : null);
        },
        splitAt: function(t) {
            var e, n = this.clone(), t = this.children.indexOf(t);
            return -1 < t && (e = this.children.length - t, n.children = this.children.splice(t, e)), 
            n;
        }
    }, B.QuoteType = b, B.defaults = {
        breakBeforeBlock: !1,
        breakStartBlock: !1,
        breakEndBlock: !1,
        breakAfterBlock: !0,
        removeEmptyTags: !0,
        fixInvalidNesting: !0,
        fixInvalidChildren: !0,
        quoteType: b.auto,
        strictMatch: !1
    }, m.get = function(t) {
        return y[t] || null;
    }, m.set = function(t, e) {
        return t && e && ((e = n(y[t] || {}, e)).remove = function() {
            delete y[t];
        }, y[t] = e), this;
    }, m.rename = function(t, e) {
        return t in y && (y[e] = y[t], delete y[t]), this;
    }, m.remove = function(t) {
        return t in y && delete y[t], this;
    }, m.formatBBCodeString = x, t.formats.bbcode = m, t.BBCodeParser = B;
}(sceditor);

!function(s) {
    "use strict";
    var f = s.dom, o = {
        albums: '<i class="fa-solid fa-images"></i',
        attachments: '<i class="fa-solid fa-paperclip"></i',
        bold: '<i class="fa-solid fa-bold"></i>',
        bulletlist: '<i class="fa-solid fa-list-ul"></i>',
        center: '<i class="fa-solid fa-align-center"></i>',
        code: '<i class="fa-solid fa-code"></i>',
        color: '<span class="fa-stack me-2 pe-2"><i class="fas fa-font fa-stack-1x"></i><i class="fa fa-xs fa-palette sce-color fa-badge"></i></span>',
        copy: '<i class="fa-solid fa-copy"></i>',
        cut: '<i class="fa-solid fa-scissors"></i>',
        email: '<i class="fa-solid fa-envelope"></i>',
        emojis: '<i class="fa-solid fa-face-smile"></i>',
        extensions: '<i class="fa-solid fa-plug"></i>',
        font: '<span class="fa-stack me-2 pe-2"><i class="fas fa-font fa-stack-1x"></i><i class="fa fa-xs fa-font fa-badge"></i></span>',
        format: '<i class="fa-solid fa-font"></i>',
        grip: '<svg xmlns="http://www.w3.org/2000/svg"viewbox="0 0 16 16" unselectable="on"><path d="M14.656 5.156l-10 10 .688.688 10-10-.688-.688zm0 3l-7 7 .688.688 7-7-.688-.688zm0 3l-4 4 .688.688 4-4-.688-.688z"/></svg>',
        mark: '<i class="fa-solid fa-highlighter"></i>',
        horizontalrule: '<i class="fa-solid fa-grip-lines"></i>',
        image: '<i class="fa-solid fa-image"></i>',
        indent: '<i class="fa-solid fa-indent"></i>',
        italic: '<i class="fa-solid fa-italic"></i>',
        justify: '<i class="fa-solid fa-align-justify"></i>',
        left: '<i class="fa-solid fa-align-left"></i>',
        link: '<i class="fa-solid fa-link"></i>',
        maximize: '<i class="fa-solid fa-maximize"></i>',
        media: '<i class="fa-solid fa-photo-film"></i>',
        orderedlist: '<i class="fa-solid fa-list-ol"></i>',
        outdent: '<i class="fa-solid fa-outdent"></i>',
        paste: '<i class="fa-solid fa-paste"></i>',
        pastetext: '<i class="fa-solid fa-paste"></i>',
        quote: '<i class="fa-solid fa-quote-left"></i>',
        redo: '<i class="fa-solid fa-redo"></i>',
        removeformat: '<i class="fa-solid fa-remove-format"></i>',
        reply: '<i class="fa-solid fa-reply"></i>',
        right: '<i class="fa-solid fa-align-right"></i>',
        size: '<span class="fa-stack me-2 pe-2"><i class="fas fa-font fa-stack-1x"></i><i class="fa fa-xs fa-up-down fa-badge"></i></span>',
        source: '<i class="fa-solid fa-file-code"></i>',
        strike: '<i class="fa-solid fa-strikethrough"></i>',
        underline: '<i class="fa-solid fa-underline"></i>',
        undo: '<i class="fa-solid fa-undo"></i>',
        unlink: '<i class="fa-solid fa-link-slash"></i>',
        vimeo: '<i class="fa-brands fa-vimeo"></i>',
        instagram: '<i class="fa-brands fa-instagram"></i>',
        facebook: '<i class="fa-brands fa-facebook"></i>',
        youtube: '<i class="fa-brands fa-youtube"></i>'
    };
    s.icons.fontawesome = function() {
        var l, i = {};
        return {
            create: function(a) {
                return a in o && (i[a] = s.dom.parseHTML(o[a]).firstChild, "color" === a) && (l = i[a].querySelector(".sce-color")), 
                i[a];
            },
            update: function(s, i) {
                if (l) {
                    let a = "inherit";
                    !s && i && (a = i.ownerDocument.queryCommandValue("forecolor")), 
                    f.css(l, "color", a);
                }
            },
            rtl: function(a) {
                var s = i.grip;
                s && (f.css(s, "transform", a = a ? "scaleX(-1)" : ""), f.css(s, "msTransform", a), 
                f.css(s, "webkitTransform", a));
            }
        };
    }, s.icons.fontawesome.icons = o;
}((document, sceditor));

!function(n) {
    "use strict";
    var v = void 0 !== window.FileReader, u = /data:[^;]+;base64,/i;
    n.plugins.dragdrop = function() {
        var a, r, i, A, o, s;
        function d() {
            o.style.display = "none", A.className = A.className.replace(/(^| )dnd( |$)/g, "");
        }
        function l() {
            return 1;
        }
        function f(e) {
            var n = document.createElement("img");
            function t(e) {
                var t = r.getBody().ownerDocument.getElementById(n.id);
                t && ("string" == typeof e && t.insertAdjacentHTML("afterend", e), 
                t.parentNode.removeChild(t));
            }
            return n.src = "data:image/gif;base64,R0lGODlhlgBkAPABAH19ffb29iH5BAAKAAAAIf4aQ3JlYXRlZCB3aXRoIGFqYXhsb2FkLmluZm8AIf8LTkVUU0NBUEUyLjADAQAAACwAAAAAlgBkAAAC1YyPqcvtD6OctNqLs968+w+G4kiW5omm6sq27gvH8kzX9o3n+s73/g8MCofEovGITCqXzKbzCY1Kp9Sq9YrNarfcrvcLDovH5LL5jE6r1+y2+w2Py+f0uv2OvwD2fP6iD/gH6Pc2GIhg2JeQSNjGuLf4GMlYKIloefAIUEl52ZmJyaY5mUhqyFnqmQr6KRoaMKp66hbLumpQ69oK+5qrOyg4a6qYV2x8jJysvMzc7PwMHS09TV1tfY2drb3N3e39DR4uPk5ebn6Onq6+zt7u/g4fL99UAAAh+QQACgAAACwAAAAAlgBkAIEAAAB9fX329vYAAAAC3JSPqcvtD6OctNqLs968+w+G4kiW5omm6sq27gvH8kzX9o3n+s73/g8MCofEovGITCqXzKbzCY1Kp9Sq9YrNarfcrvcLDovH5LL5jE6r1+y2+w2Py+f0uv2OvwD2fP4iABgY+CcoCNeHuJdQyLjIaOiWiOj4CEhZ+SbZd/nI2RipqYhQOThKGpAZCuBZyArZprpqSupaCqtaazmLCRqai7rb2av5W5wqSShcm8fc7PwMHS09TV1tfY2drb3N3e39DR4uPk5ebn6Onq6+zt7u/g4fLz9PX29/j5/vVAAAIfkEAAoAAAAsAAAAAJYAZACBAAAAfX199vb2AAAAAuCUj6nL7Q+jnLTai7PevPsPhuJIluaJpurKtu4Lx/JM1/aN5/rO9/4PDAqHxKLxiEwql8ym8wmNSqfUqvWKzWq33K73Cw6Lx+Sy+YxOq9fstvsNj8vn9Lr9jr8E9nz+AgAYGLjQVwhXiJgguAiYgGjo9tinyCjoKLn3hpmJUGmJsBmguUnpCXCJOZraaXoKShoJe9DqehCqKlnqiZobuzrbyvuIO8xqKpxIPKlwrPCbBx0tPU1dbX2Nna29zd3t/Q0eLj5OXm5+jp6uvs7e7v4OHy8/T19vf4+fr7/P379UAAAh+QQACgAAACwAAAAAlgBkAIEAAAB9fX329vYAAAAC4JSPqcvtD6OctNqLs968+w+G4kiW5omm6sq27gvH8kzX9o3n+s73/g8MCofEovGITCqXzKbzCY1Kp9Sq9YrNarfcrvcLDovH5LL5jE6r1+y2+w2Py+f0uv2OvwT2fP6iD7gAMEhICAeImIAYiFDoOPi22KcouZfw6BhZGUBZeYlp6LbJiTD6CQqg6Vm6eQqqKtkZ24iaKtrKunpQa9tmmju7Wwu7KFtMi3oYDMzompkHHS09TV1tfY2drb3N3e39DR4uPk5ebn6Onq6+zt7u/g4fLz9PX29/j5+vv8/f31QAADs=", 
            n.className = "sceditor-ignore", n.id = "sce-dragdrop-" + s++, function() {
                return e ? e.parentNode.replaceChild(n, e) : r.wysiwygEditorInsertHtml(n.outerHTML), 
                {
                    insert: function(e) {
                        t(e);
                    },
                    cancel: t
                };
            };
        }
        function e(e) {
            var t = e.dataTransfer, n = t.files.length || !t.items ? t.files : t.items;
            for (let e = 0; e < n.length; e++) if ("string" === n[e].kind) return;
            "none" === o.style.display && (o.style.display = "block", A.className += " dnd"), 
            e.preventDefault();
        }
        function t(e) {
            var t = e.dataTransfer, n = t.files.length || !t.items ? t.files : t.items;
            d();
            for (let e = 0; e < n.length; e++) {
                if ("string" === n[e].kind) return;
                l(n[e]), i(n[e], f());
            }
            e.preventDefault();
        }
        v && (s = 0, this.signalReady = function() {
            a = (r = this).opts.dragdrop || {}, i = a.handleFile, A = r.getContentAreaContainer().parentNode, 
            o = A.appendChild(n.dom.parseHTML('<div class="sceditor-dnd-cover" style="display: none"></div>').firstChild), 
            A.addEventListener("dragover", e), A.addEventListener("dragleave", d), 
            A.addEventListener("dragend", d), A.addEventListener("drop", t), r.getBody().addEventListener("dragover", e), 
            r.getBody().addEventListener("drop", d);
        }, this.signalPasteHtml = function(e) {
            if (!("handlePaste" in a) || a.handlePaste) {
                var t = document.createElement("div"), n = (t.innerHTML = e.val, 
                t.querySelectorAll("img"));
                for (let e = 0; e < n.length; e++) {
                    var r, A = n[e];
                    u.test(A.src) && ((r = function(e) {
                        var t = e.substr(5, e.indexOf(";") - 5), n = atob(e.substr(e.indexOf(",") + 1)), r = new Uint8Array(n.length);
                        for (let e = 0; e < n.length; e++) r[e] = n[e].charCodeAt(0);
                        try {
                            return new Blob([ r ], {
                                type: t
                            });
                        } catch (e) {
                            return null;
                        }
                    }(A.src)) ? i(r, f(A)) : A.parentNode.removeChild(A));
                }
                e.val = t.innerHTML;
            }
        });
    };
}(sceditor);

!function() {
    "use strict";
    sceditor.plugins.undo = function() {
        var n, i, a, o, r = this, s = "", c = 0, u = !1, d = !1, l = !1, e = 50, t = [], g = 0;
        function f(e) {
            if (d = !0, i.sourceMode(e.sourceMode), e.sourceMode) i.val(e.value, !1), 
            i.sourceEditorCaret(e.caret); else if (i.getBody().innerHTML = e.value, 
            e.caret) {
                var t = i.getRangeHelper().selectedRange(), n = t, e = e.caret;
                try {
                    var o = e.startPositions, r = e.endPositions;
                    n.setStart(m(a, o), o[0]), n.setEnd(m(a, r), r[0]);
                } catch (e) {
                    console && console.warn && console.warn("[SCEditor] Undo plugin lost caret", e);
                }
                i.getRangeHelper().selectRange(t);
            }
            i.focus(), d = !1;
        }
        function h(e, t) {
            var n = e[t];
            e[t] = function() {
                var e = u;
                !e && !d && o && i.getRangeHelper().hasSelection() && v(), u = !0, 
                n.apply(this, arguments), e || (u = !1, d) || (p(), s = "");
            };
        }
        function p() {
            g && (t.length -= g, g = 0), 0 < e && e < t.length && t.shift(), o = {}, 
            v(), t.push(o);
        }
        function v() {
            var e = i.sourceMode(), e = (o.caret = e ? i.sourceEditorCaret() : function(e) {
                if (e) return a.normalize(), {
                    startPositions: y(e.startContainer, e.startOffset),
                    endPositions: y(e.endContainer, e.endOffset)
                };
            }(i.getRangeHelper().selectedRange()), (o.sourceMode = e) ? i.getSourceEditorValue(!1) : i.getBody().innerHTML), t = document.getElementById("editor-Counter"), n = i.opts.maxLength;
            i.val().length > n ? r.undo() : t.textContent = n - i.val().length, 
            o.value = e;
        }
        function E() {
            n === document.activeElement && r.signalSelectionchangedEvent();
        }
        function y(e, t) {
            for (var n = [ t ], o = e; o && "BODY" !== o.tagName; ) n.push(function(e) {
                var t = 0;
                for (;e = e.previousSibling; ) t++;
                return t;
            }(o)), o = o.parentNode;
            return n;
        }
        function m(t, n) {
            for (let e = n.length - 1; t && 0 < e; e--) t = t.childNodes[n[e]];
            return t;
        }
        r.init = function() {
            e = (i = this).undoLimit || e, i.addShortcut("ctrl+z", r.undo), i.addShortcut("ctrl+shift+z", r.redo), 
            i.addShortcut("ctrl+y", r.redo);
        }, r.signalReady = function() {
            function e(e) {
                "historyUndo" === e.inputType ? (r.undo(), e.preventDefault()) : "historyRedo" === e.inputType && (r.redo(), 
                e.preventDefault());
            }
            function t() {
                s = "", p();
            }
            n = i.getContentAreaContainer().nextSibling, a = i.getBody(), p(), h(i, "setWysiwygEditorValue"), 
            h(i, "setSourceEditorValue"), h(i, "sourceEditorInsertText"), h(i.getRangeHelper(), "insertNode"), 
            h(i, "toggleSourceMode"), a.addEventListener("beforeinput", e), n.addEventListener("beforeinput", e), 
            a.addEventListener("compositionend", t), n.addEventListener("compositionend", t), 
            document.addEventListener("selectionchange", E);
        }, r.destroy = function() {
            document.removeEventListener("selectionchange", E);
        }, r.undo = function() {
            return o = null, g < t.length - 1 && (g++, f(t[t.length - 1 - g])), 
            !1;
        }, r.redo = function() {
            return 0 < g && (g--, f(t[t.length - 1 - g])), !1;
        }, r.signalSelectionchangedEvent = function() {
            d || l ? l = !1 : (o && v(), s = "");
        }, r.signalInputEvent = function(e) {
            var t = e.inputType;
            if (l = !0, t && !e.isComposing) switch (e.inputType) {
              case "deleteContentBackward":
                o && s === t && c < 20 ? v() : (p(), c = 0), s = t;
                break;

              case "insertText":
                c += e.data ? e.data.length : 1, o && s === t && c < 20 && !/\s$/.test(e.data) ? v() : (p(), 
                c = 0), s = t;
                break;

              default:
                s = "sce-misc", c = 0, p();
            }
        };
    };
}();

function mentions(opts = {}) {
    opts = Object.assign({}, {
        lookup: "lookup",
        id: "",
        selector: "",
        element: null,
        symbol: "@",
        items: [],
        item_template: '<a class="dropdown-item" href="#" style="font-family: var(--bs-body-font-family);"><img src="${item.avatar}" alt="avatar" class="me-2 img-thumbnail" style="max-width:20px;max-height:20px" /> ${item.name}</a>',
        onclick: undefined,
        url: ""
    }, opts);
    const $e = opts.element.inSourceMode() ? opts.element.getSourceEditor() : opts.element.getContentAreaContainer().contentWindow.document.body;
    if (!$e) return console.error("Invalid element selector", opts);
    var $lookup = document.createElement("div");
    $lookup.classList = `fixed-top autohide ${opts.lookup}`;
    $e.parentNode.insertBefore($lookup, $e.nextSibling);
    $e.addEventListener("keydown", processKey);
    $e.addEventListener("keyup", showLookup);
    $e.addEventListener("click", hideLookup);
    var start, end, prevWord;
    var isFixed = false;
    var $el = $lookup.parentNode;
    while ($el && $el.nodeName.toLowerCase() !== "body" && !isFixed) {
        isFixed = window.getComputedStyle($el).getPropertyValue("position").toLowerCase() === "fixed";
        $el = $el.parentElement;
    }
    function showLookup(event) {
        if (event.code === "Escape") {
            return hideLookup();
        }
        var sel, text, curr;
        if (opts.element.inSourceMode()) {
            sel = document.getSelection();
            var $parent = opts.element.getSourceEditor();
            text = $parent.value || "";
            curr = sel.baseOffset;
        } else {
            sel = opts.element.getContentAreaContainer().contentWindow.document.getSelection();
            text = opts.element.val() || "";
            curr = sel.baseOffset;
        }
        var getLength = arr => arr instanceof Array && arr.length > 0 ? arr[0].length : 0;
        start = curr - getLength(text.slice(0, curr).match(/[\S]+$/g));
        end = curr + getLength(text.slice(curr).match(/^[\S]+/g));
        var word = text.substring(start, end);
        if (!word || word[0] !== opts.symbol) {
            prevWord = "";
            return hideLookup();
        }
        if (word === prevWord) return;
        prevWord = word;
        var pos = {
            x: 0,
            y: 0
        };
        var parentRect = opts.element.inSourceMode() ? opts.element.getSourceEditor().getBoundingClientRect() : opts.element.getContentAreaContainer().contentWindow.document.body.getBoundingClientRect();
        pos.y = parentRect.top + 30;
        pos.x = parentRect.left + 20;
        $lookup.style.left = pos.x + "px";
        $lookup.style.top = pos.y + "px";
        var query = word.slice(1);
        if (query.length >= 3) {
            fetch(opts.url.replace("{q}", query), {
                method: "GET",
                headers: {
                    Accept: "application/json",
                    "Content-Type": "application/json;charset=utf-8",
                    RequestVerificationToken: document.querySelector('input[name="__RequestVerificationToken"]').value
                }
            }).then(response => response.json()).then(data => opts.items = data);
        }
        var items = opts.items.filter(e => e.name.toLowerCase().includes(word.slice(1).toLowerCase())).map(item => eval('`<li class="mention-li-nt ${opts.lookup}" data-name = "${item.name}" data-id = "${item.id}">' + opts.item_template + "</li>`"));
        if (!items.length) return hideLookup();
        $lookup.innerHTML = `<ul class="dropdown-menu show">${items.join("")}</ul>`;
        [ ...$lookup.firstElementChild.children ].forEach($el => $el.addEventListener("click", onClick) || $el.addEventListener("mouseenter", onHover));
        $lookup.firstElementChild.children[0].classList.add("active");
        if ($lookup.hasAttribute("hidden")) $lookup.removeAttribute("hidden");
        var bounding = $lookup.getBoundingClientRect();
        if (!(bounding.top >= 0 && bounding.left >= 0 && bounding.bottom <= (window.innerHeight || document.documentElement.clientHeight) && bounding.right <= (window.innerWidth || document.documentElement.clientWidth))) $lookup.style.top = parseInt($lookup.style.top) - 10 - $lookup.clientHeight + "px";
    }
    function hideLookup() {
        if (!$lookup.hasAttribute("hidden")) $lookup.setAttribute("hidden", true);
    }
    function onClick(event) {
        const deleteItem = event.target.classList.contains("mention-li-nt") ? event.target : event.target.parentElement;
        opts.onclick(deleteItem.dataset);
        var value = opts.element.val();
        opts.element.val(value.replace(value.substring(start + 1, end), ""));
        hideLookup();
    }
    function onHover(event) {
        const $el = event.target.closest(".mention-li-nt");
        if ($el.classList.contains("active")) return;
        [ ...$lookup.firstElementChild.children ].filter($el => $el.classList.contains("active")).forEach($el => $el.classList.remove("active"));
        $el.classList.add("active");
    }
    function processKey(event) {
        const code = event.key;
        if ([ "ArrowUp", "ArrowDown", "Enter" ].indexOf(code) == -1 || $lookup.hasAttribute("hidden")) return;
        event.preventDefault();
        if (code == "Enter") return $lookup.querySelector(".active").click();
        const $children = [ ...$lookup.firstElementChild.children ];
        const curr = $children.findIndex($el => $el.classList.contains("active"));
        $children[curr].classList.remove("active");
        const $next = $children[($children.length + curr + (code == "ArrowUp" ? -1 : 1)) % $children.length];
        $next.classList.add("active");
        $next.scrollIntoView(false);
    }
}